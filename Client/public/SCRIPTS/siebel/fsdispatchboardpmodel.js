/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2016
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 16.0.0.0SIA[23057] */
typeof SiebelAppFacade.fsDispatchBoardPM=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.fsDispatchBoardPM"),define("siebel/fsdispatchboardpmodel",["siebel/ganttpmodel"],function(){return SiebelAppFacade.fsDispatchBoardPM=function(){function B(){SiebelAppFacade.fsDispatchBoardPM.superclass.constructor.apply(this,arguments)}function j(e){return L[e]}function F(e,t,n,r){var i=0,s;if(e==="RefreshGantt")i=this.Get("PanesToRefresh"),t.SetProperty("PanesToRefresh",i),t.SetProperty("TST",this.Get("TST")),r.CancelOperation=!1;else if(e==="ShowPopup")i|=2,i|=4,i|=16,this.SetProperty("PanesToRefresh",i),t.SetProperty("PanesToRefresh",i),r.CancelOperation=!1;else if(e==="PopulateScoreColumn"||e==="PopulateDistanceColumn"||e==="PopulateWirelessColumn")i|=2,i|=4,i|=16,this.SetProperty("PanesToRefresh",i),s=this.Get("Resource Id"),t.SetProperty("SelectedRow",s),t.SetProperty("PanesToRefresh",i),r.CancelOperation=!1;else if(e==="InvokeOperation"){var o="",u="";u=String(t.GetProperty("operation")),u==="ExtendShrink"&&(o=String(t.GetProperty("booking Id")),t.SetProperty("Activity Id",o))}else r.CancelOperation=!1}function I(e,t,n,r){var i=36e5,s=24,o,u,a=new Date;for(o=1;o<8;o++){if(a.format("EEEE")===t){e=a;break}a=new Date(e.getTime()+s*i*o)}r=e.getDay()+",";for(o=1;o<n;o++)u=new Date(e.getTime()+s*i*o),r+=u.getDay()+",";P=r}function q(e){if(e.GetValue()=="EmpUtilization"){var t={},n=this.Get("ResEvents");this.SetProperty("ResEvents",t),this.SetProperty("ResEventsBak",n)}}function R(e){if(e.GetValue()=="EmpUtilization"){var t=this.Get("ResEvents"),n=this.Get("ResEventsBak");this.SetProperty("ResEvents",n),this.SetProperty("ResScheduleEvents",t)}}function U(){var e,t,n,i,s;s=this.Get("InEvent"),s==1&&this.SetProperty("NotifyTSButtonClk","TRUE"),i=String(this.Get("NotifyTSButtonClk")),i!="TRUE"&&(e=String(this.Get(f)),t=String(this.Get(l)),n=t+"/"+e,n==="/"&&(n="Day/Hour"),this.SetProperty(r,H[n])),this.SetProperty("NotifyTSButtonClk","")}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=e.get("SWE_GANTT_DAYINFO"),n=e.get("SWE_GANTT_START_DATE"),r=e.get("SWE_GANTT_TIME_SCALE"),i=e.get("SWE_GANTT_STARTMILLIS"),s=e.get("SWE_GANTT_ACTIVITY_START_TIME"),o=e.get("SWE_GANTT_ACTIVITY_END_TIME"),u=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),a=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),f=e.get("SWE_FS_DISPATCHBOARD_ACTIVITY_MINOR_TIME_SCALE"),l=e.get("SWE_FS_DISPATCHBOARD_ACTIVITY_MAJOR_TIME_SCALE"),c=e.get("SWE_GANTT_BOTTOMAXIS"),h=e.get("SWE_GANTT_NOOFHRS"),p=e.get("SWE_GANTT_ENDMILLIS"),d=e.get("SWE_GANTT_DAY_HOUR"),v=e.get("SWE_GANTT_DAY_TWOHOUR"),m=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),g=e.get("SWE_GANTT_DAY_DAY_HALFHOUR"),y=e.get("SWE_GANTT_DAY_DAY_QUARTERHOUR"),b=e.get("SWE_GANTT_DAY_DAYPART"),w=e.get("SWE_GANTT_WEEK_DAY_DAYPART"),E=e.get("SWE_GANTT_MONTH_DOW_DAYPART"),S=e.get("SWE_GANTT_WEEK_DAY"),x=e.get("SWE_GANTT_MONTH_DAY"),T=e.get("SWE_GANTT_YEAR_MONTH"),N=e.get("SWE_GANTT_YEAR_WEEK"),C=e.get("SWE_GANTT_MONTH_WEEK"),k=e.get("SWE_GANTT_MONTH_DOW"),L={1:7,2:1,4:1,32:35,64:31,128:7,256:35,512:1,1024:1,2048:1,4096:1,8192:366,16384:366,32768:35},A={1:6,2:0,4:0,32:28,64:30,128:6,256:28,512:0,1024:0,2048:0,4096:0,8192:365,16384:365,32768:28},O=e.get("SWE_GANTT_RENDER_INFO"),M=e.get("SWE_GANTT_ACTIVITY_EARLIEST_LATEST_VIOLATION"),_=e.get("SWE_GANTT_LOAD_ACTIVITY_INTO_ABS"),D=e.get("SWE_GANTT_SERVICE_REGION_ID"),P="",H={};return H["Year/Month"]=8192,H["Year/Week"]=16384,H["Month/Week"]=32768,H["Month/Day"]=64,H["Week/Day"]=1,H["Day/4 Hours"]=1024,H["Day/2 Hours"]=512,H["Day/Hour"]=4,H["Day/Half Hour"]=2048,H["Day/Quarter Hour"]=4096,SiebelJS.Extend(B,SiebelAppFacade.GanttPresentationModel),B.prototype.Init=function(){SiebelAppFacade.fsDispatchBoardPM.superclass.Init.call(this),this.AddProperty(s,""),this.AddProperty(o,""),this.AddProperty(u,""),this.AddProperty(a,""),this.AddProperty(f,""),this.AddProperty(l,""),this.AddProperty(n,""),this.AddProperty(t,""),this.AddProperty(c,""),this.AddProperty(r,""),this.AddProperty(h,""),this.AddProperty(i,""),this.AddProperty(p,""),this.AddProperty(O,""),this.AddMethod("InvokeMethod",F,{sequence:!0,scope:this}),this.AddProperty("ResScheduleEvents",""),this.AddProperty("ResEventsBak",""),this.AddProperty("Schedulerecordset",""),this.AddProperty("GANTTELSV",""),this.AddProperty("GANTTLOADACT",""),this.AddProperty("GANTTSRID",""),this.AddProperty("pmrecordset",""),this.AddProperty("NotifyTSButtonClk",""),this.AddProperty("isDispatchBoard","TRUE"),this.AddMethod("prepareEventInfo",q,{scope:this,sequence:!0}),this.AddMethod("prepareEventInfo",R,{scope:this,sequence:!1}),this.AddMethod("setDefaults",U,{scope:this,sequence:!1})},B.prototype.createPeriod=function(e,f){var l,c,h,w,E,k,L,A=36e5,O=24,M,_="",D="",H="";l=new Date(this.Get(n));if(!l||!l instanceof Date)l=new Date;E=String(this.Get(u)),this.Get(u)?E=String(this.Get(u)):E=7,this.Get(a)?k=String(this.Get(a)):k=l.format("EEEE"),this.SetProperty("UserPrefWDS",this.Get(a)),M=j(Number(this.Get(r))),this.SetProperty("IsTotalHPagesChanged","Y");switch(Number(this.Get(r))){case d:case v:case m:case g:case y:h=String(this.Get(s)),w=String(this.Get(o));for(var B=0;B<2;B++)h.charAt(B)!=":"&&(D+=h.charAt(B)),w.charAt(B)!=":"&&(H+=w.charAt(B));if(Number(this.Get(r))==v){if(D!=""){var F=Number(D)%2==0?0:Number(D)%2;F&&(D=Number(D)-(2-F))}H!=""&&(F=Number(H)%2==0?0:Number(H)%2,F&&(H=Number(H)+(2-F)))}else if(Number(this.Get(r))==m){if(D!=""){var F=Number(D)%4==0?0:Number(D)%4;F&&(D=Number(D)-F)}H!=""&&(F=Number(H)%4==0?0:Number(H)%4,F&&(H=Number(H)+(4-F)))}D==""&&(D=0),H==""&&(H=24),E!=""&&k!=""&&E!="0"?(l=new Date(this.Get(i)),c=new Date(this.Get(p)),I(l,k,E,_)):(this.SetProperty("StartDate",l),l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),E!=""&&k!=""&&E!="0"&&I(l,k,E,_),c=new Date(l.getTime()),c.setDate(l.getDate()+f*M-1),c.setHours(23,59,59,999)),Number(this.Get(r))==g?this.SetProperty("Scale_factor",2):Number(this.Get(r))==y?this.SetProperty("Scale_factor",4):this.SetProperty("Scale_factor",1),this.SetProperty("StartTime",A*D),
this.SetProperty("EndTime",A*H),this.SetProperty("TDays",24*A),this.SetProperty("AxisDuration",this.Get("EndTime")-this.Get("StartTime"));break;case b:L=this.Get(t)[0],setHoursFrom(l,L.ST),c=new Date(l.getTime()+f*O*A);break;case S:E!=""&&k!=""&&E!="0"?(l=new Date(this.Get(i)),c=new Date(this.Get(p)),I(l,k,E,_)):(l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),E!=""&&k!=""&&E!="0"&&I(l,k,E,_),c=new Date(l.getTime()),c.setDate(l.getDate()+f*M-1),c.setHours(23,59,59,999)),this.SetProperty("StartTime","0"),this.SetProperty("EndTime",24*A-1),this.SetProperty("TDays",24*A),this.SetProperty("AxisDuration",24*A-1);break;case x:E!=""&&k!=""&&E!="0"?(l=new Date(this.Get(i)),c=new Date(this.Get(p)),I(l,k,E,_)):(l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),E!=""&&k!=""&&E!="0"&&I(l,k,E,_),c=new Date(l.getTime()),c.setDate(l.getDate()+f*M-1),c.setHours(23,59,59,999)),this.SetProperty("StartTime","0"),this.SetProperty("EndTime",24*A-1),this.SetProperty("TDays",24*A),this.SetProperty("AxisDuration",24*A-1);break;case T:l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),c=new Date(l.getTime()+f*A*O*364),c.setHours(23,59,59,999);break;case N:l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),c=new Date(l.getTime()+f*A*O*364),c.setHours(23,59,59,999);break;case C:l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),c=new Date(l.getTime()),c.setDate(l.getDate()+f*M-1),c.setHours(23,59,59,999);break;default:l.setDate(l.getDate()+e*M),l.setHours(0,0,0,0),c=new Date(l.getTime()),c.setDate(l.getDate()+f*M-1),c.setHours(23,59,59,999)}this.SetProperty(i,l.getTime()),this.SetProperty(p,c.getTime()),this.SetProperty(u,E),this.SetProperty("FinalWeekDays",P),(this.Get(r)=="4"||this.Get(r)=="512"||this.Get(r)=="1024"||this.Get(r)=="1"||this.Get(r)=="64"||this.Get(r)=="2048"||this.Get(r)=="4096")&&this.calcDayLeft()},B.prototype.calcDayLeft=function(){var e=new Date(this.Get(i)),t=new Date(this.Get(p)),n,s=this.Get("TDays"),o=0,a=0,f,l={},c=this.Get(r),h=Number(this.Get(u)),d=j(Number(this.Get(r))),v=this.Get("datePaddingMap"),m=new Date,g=v[Number(this.Get(r))],y=0,b=Number(g)+1;if(c==1)b=Number(g)*Number(h)+1,n=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1),h&&(n/=h);else if(c==64){f=new Date(this.Get(i));while(f.getTime()<=t.getTime())P.indexOf(f.getDay())!==-1&&a++,f.setTime(f.getTime()+s);a&&(n=1/a)}else n=1/(this.Get("TotalHPages")>0?this.Get("TotalHPages"):1);while(e.getTime()<=t.getTime())P.indexOf(e.getDay())!==-1&&(l[e.format("MM/dd/yyyy")]=o,o+=n,y++,c==1?y==b&&(m=new Date(e)):y==b&&(m=new Date(e))),e.setTime(e.getTime()+s);this.SetProperty("DayLoc",l),this.SetProperty("PixelsPerUnit",n),this.SetProperty("paddingMiddleDayMillis",m.getTime()),this.SetProperty("StartDate",m),this.Get("EndTime")-this.Get("StartTime")>0&&this.SetProperty("miniFX",n/(this.Get("EndTime")-this.Get("StartTime")))},B.prototype.prepareUtillpage=function(e,t){var n=[];n=this.Get("ResScheduleEvents");if(typeof n=="object"){var r,i=this.Get("RecordSet"),s=i.length;if(e!==0)r=this.Get("Schedulerecordset");else{r=[];for(var o=0;o<s;o++)r.push($.extend({},i[o]))}this.SetProperty("RecordSet",r);var u=this.Get("ResEvents"),a=this.Get("ResScheduleEvents");this.SetProperty("ResEvents",a),SiebelAppFacade.fsDispatchBoardPM.superclass.prepareUtillpage.call(this,e,t);var f=this.Get("RecordSet");this.SetProperty("Schedulerecordset",f),this.SetProperty("ResEvents",u),this.SetProperty("RecordSet",i)}SiebelAppFacade.fsDispatchBoardPM.superclass.prepareUtillpage.call(this,e,t)},B}(),"SiebelAppFacade.fsDispatchBoardPM"}));
