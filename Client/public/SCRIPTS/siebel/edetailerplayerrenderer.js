/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2016
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 16.0.0.0SIA[23057] */
typeof SiebelAppFacade.EdetailerPlayerRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.EdetailerPlayerRenderer"),define("siebel/edetailerplayerrenderer",["siebel/phyrenderer","3rdParty/pdf"],function(){return SiebelAppFacade.EdetailerPlayerRenderer=function(){function o(e){SiebelAppFacade.EdetailerPlayerRenderer.superclass.constructor.call(this,e);var t=e;this.GetPM=function(){return t}}function u(){window.outerWidth===screen.width&&window.outerHeight===screen.height?s===!1&&($(".AppletButtons").hide(),$(".siebui-thread").hide(),$(".siebui-edetailing-player-applet").addClass("siebui-edetailing-player-fullscreen-applet"),$(".siebui-edetailing-threadbar-prev-container").addClass("siebui-edetailing-threadbar-prev-fullscreen-container"),s=!0):($(".AppletButtons").show(),$(".siebui-edetailing-player-applet").removeClass("siebui-edetailing-player-fullscreen-applet"),$(".siebui-edetailing-threadbar-prev-container").removeClass("siebui-edetailing-threadbar-prev-fullscreen-container"),s=!1)}function a(e){var t=[];t=e.data;var n=t[0],r=t[1],i=t[2];SiebelAppFacade.EdetailerPlayerRenderer&&SiebelAppFacade.EdetailerPlayerRenderer.prototype.ExecuteMethod(n,r,i)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=!0,n=!0,r=!1,i=!1,s=!1;return SiebelJS.Extend(o,SiebelAppFacade.PhysicalRenderer),o.prototype.Init=function(){SiebelAppFacade.EdetailerPlayerRenderer.superclass.Init.call(this),this.AttachPMBinding("ShowSelection",this.ShowSelection),this.AttachPMBinding("detailerMenuBar",this.detailerMenuBar),this.AttachPMBinding("detailerThreadBar",this.detailerThreadBar),jQuery.event.add(window,"resize",u),window.addEventListener("message",a,!1)},o.prototype.ShowUI=function(e){SiebelAppFacade.EdetailerPlayerRenderer.superclass.ShowUI.call(this,e);var t=this.GetPM(),n=$("#"+t.Get("GetFullId")),r=new Date;$("#_sweappmenu").hide(),$(".siebui-button-toolbar").hide(),$("#_swethreadbar").hide(),$("#_swescrnbar").hide(),$(".siebui-mobile").hide(),$(".AppletMenu").hide(),n.find(".siebui-applet-header").hide(),n.find(".AppletButtons").hide(),$(".siebui-banner").hide(),$(".AppletButtons").addClass("siebui-player-applet-btn"),$(".siebui-form-applet-header").addClass("siebui-view-player-top"),i=!1,$("#_sweview").addClass("siebui-player-scroll"),$("#_sweclient").addClass("siebui-player-scroll"),$("#_swecontent").addClass("siebui-edetail-top")},o.prototype.BindEvents=function(e){var t=this.GetPM(),n,r,i,e=this.GetPM().Get("GetControls");$("#"+t.Get("GetFullId")).on("click",".siebui-player-prev-slide",function(){t.ExecuteMethod("GotoPreviousSet")}),$("#"+t.Get("GetFullId")).on("click",".siebui-player-next-slide",function(){t.ExecuteMethod("GotoNextSet")});var s=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM();s.ExecuteMethod("SysPref"),n=s.Get("GetSysPref"),r=s.Get("GetCrossInd"),SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()&&(r="N");if(e.Done||e.DoneButton)n==="Y"&&r!=="Y"?i=$("#"+e.DoneButton.GetInputName()+"_Ctrl"):i=$("#"+e.Done.GetInputName()+"_Ctrl"),i.on("click",{ctx:this},function(e){$(".AppletButtons").hide(),$(".siebui-edetailing-title-prev-container").addClass("siebui-player-navbar"),$(".siebui-edetailing-threadbar-prev-container").addClass("siebui-player-navbar"),$(".siebui-banner").hide();var t=SiebelApp.S_App.GetService("LS PCD Service"),n=SiebelApp.S_App.NewPropertySet(),r=e.data.ctx.GetPM(),i=new Date;r.ExecuteMethod("SetSesRecData");var o=r.ExecuteMethod("GetSesRecData");if(s.Get("LastUpdatedRec")!==o.MpiId&&t){var u={};u.async=!0,u.scope=this,u.npr=!0,u.selfbusy=!0,u.cb=function(){outPropSet=arguments[2]};var a=i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),f=s.Get("PlayerStartTime");n.SetProperty("MpiId",o.MpiId),n.SetProperty("StartTime",f),n.SetProperty("ThumbnailPath",o.ThumbnailPath),n.SetProperty("EndTime",a),n.SetProperty("ParentMPId",o.ParentMPId),n.SetProperty("ItemName",o.ItemName),n.SetProperty("ParentMPName",o.ParentMPName),n.SetProperty("ParentDsblMsgResponse",o.ParentDsblMsgResponse),n.SetProperty("LitFileExt",o.LitFileExt),n.SetProperty("LitFileRev",o.LitFileRev),n.SetProperty("LiteratureId",o.LiteratureId),n.SetProperty("ThumbnailExtension",o.ThumbnailExtension),n.SetProperty("ThumbnailId",o.ThumbnailId),n.SetProperty("ThumbnailRevId",o.ThumbnailRevId),s.AddProperty("LastUpdatedRec",o.MpiId),s.Get("UpdatePlayer")==="N"?n.SetProperty("Mode","INSERT"):n.SetProperty("Mode","UPDATE"),s.AddProperty("UpdatePlayer","N"),$("#"+s.Get("ThreadbarFullId")).hide(),$(".siebui-currentpdf-media").hide(),$(".siebui-browsercomp-header").hide(),$("#_sweview").removeClass("siebui-player-scroll"),$("#_sweclient").removeClass("siebui-player-scroll"),$("#_swecontent").removeClass("siebui-edetail-top"),t.InvokeMethod("LogMsgPlanItemSesResponse",n,u)}});SiebelAppFacade.EdetailerPlayerRenderer.superclass.BindEvents.call(this,e)},o.prototype.ExecuteMethod=function(e,t,n){var r=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).Get("hotspotappletname");e==="detailerMenuBar"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("detailerMenuBar",t):e==="detailerThreadBar"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("detailerThreadBar",t):e==="GoToNextItem"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("GoToNextItem"):e==="GotoPreviousItem"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("GotoPreviousItem"):e==="navigateToItem"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("navigateToItem",t):e==="RelatedItemStartTime"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("RelatedItemStartTime"):e==="RelatedItemEndTime"?SiebelAppFacade.ComponentMgr.FindComponent({id:r}).ExecuteMethod("RelatedItemEndTime",t,n):alert(_SWEgetMessage("AppletErrNoSuchMethod"))},o.prototype.BindData=function(e){SiebelAppFacade.EdetailerPlayerRenderer.superclass.BindData.
call(this,e);var t=this.GetPM(),r=t.Get("GetFullId"),s=$("#"+t.Get("GetFullId")),o=t.Get("GetRecordSet")[t.Get("GetSelection")],u=t.Get("GetControls"),a=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM(),f,l,c,h,p=this,d=SiebelApp.S_App.IsAutoOn(),v,m;o&&(v=o.LitFileExt,m=v.toLowerCase());if(u.FullScreen){var g=u.FullScreen.GetInputName(),y=$("#"+g+"_Ctrl");y.on("click",function(){var e=document.documentElement;e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()})}if(o){var f=o["Parent Disable MenuBar Flag"],l=o["Parent Disable Nav Flag"];u=t.Get("GetControls");var b=o["File With Path"];if(!SiebelApp.S_App.GetOfflineMode||!SiebelApp.S_App.GetOfflineMode())c=this.GenNextMediaControl(m,b,0,o["Literature Id"],o.LitFileRev),h=c,s.find(".siebui-collapsible-applet-content").replaceWith(h);for(var w in u)if(u.hasOwnProperty(w)){var E=u[w];if(E.GetHTMLAttr()==="eDetailer Player")var S=E.GetInputName()}if(i===!1){if(d==="true"){s.prepend('<img class="siebui-player-prev-slide" src="images/leftnav.png" ot ="Button" rn="PreviousSlide" un="PreviousSlide" ></img>'),s.append('<img class="siebui-player-next-slide" src="images/rightnav.png" ot ="Button" rn="NextSlide" un="NextSlide" ></img>');var x=localStorage.getItem("isAdfmContainer");x==="1"&&($(".siebui-player-prev-slide").addClass("siebui-player-prev-slide-maf"),$(".siebui-player-next-slide").addClass("siebui-player-next-slide-maf"))}else{s.prepend('<img class="siebui-player-prev-slide" src="images/leftnav.png" ></img>'),s.append('<img class="siebui-player-next-slide" src="images/rightnav.png" ></img>');var x=localStorage.getItem("isAdfmContainer");x==="1"&&($(".siebui-player-prev-slide").addClass("siebui-player-prev-slide-maf"),$(".siebui-player-next-slide").addClass("siebui-player-next-slide-maf"))}if(d==="true"){var T,N='<div class="siebui-edetailing-threadbar-prev-container" ot ="SiebApplet" rn="ThreadBarArea" un="eDetailer Thread Bar Applet"></div>';s.append(N),a.Get("PlayerApplet")===t.Get("GetName")?T='<div class="siebui-edetailing-title-prev-container" ot ="SiebApplet" rn="MenuBarArea" un="Player Menu Bar"></div>':T='<div class="siebui-edetailing-title-prev-container" ot ="SiebApplet" rn="RelatedMenuBarArea" un="Related Menu Bar"></div>',s.prepend(T)}else{var N='<div class="siebui-edetailing-threadbar-prev-container"></div>';s.append(N);var T='<div class="siebui-edetailing-title-prev-container"></div>';s.prepend(T)}a.Get("PlayerApplet")===t.Get("GetName")&&this.CanInvokeNavBar(t),i=!0}$("#s_"+r+"_div").addClass("siebui-edetailing-player-applet"),$("#s_vctrl_div_tabScreen").hide(),l==="Y"&&($(".siebui-player-prev-slide").addClass("invisible"),$(".siebui-player-next-slide").addClass("invisible"))}else $("#"+t.Get("GetFullId")).removeClass("siebui-current-media");$(".siebui-edetailing-title-prev-container").on("click",function(){var e=t.Get("GetRecordSet")[t.Get("GetSelection")];if(e){var n=e["Parent Disable MenuBar Flag"];if(n==="Y")return}s.find(".AppletButtons").show(),d==="true"?setTimeout(function(){s.find(".AppletButtons").hide()},3e4):setTimeout(function(){s.find(".AppletButtons").hide()},1e4)}),s.find(".AppletButtons").mouseenter(function(){n=!1}),s.find(".AppletButtons").mouseleave(function(){n=!0}),s.find(".AppletButtons").hide(),$("#s_vctrl_div").hide(),$(".siebui-view-container").addClass("siebui-view-margin-top"),SiebelAppFacade.DecisionManager.IsTouch()&&$(".siebui-icon-fullscreen").hide(),a.AddProperty("visited","N"),o&&SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()&&SiebelApp.MobileFileMgr.GetHttpURLPrefix({success:function(e){c=p.GenNextMediaControl(m,o["File With Path"],0,o["Literature Id"],o.LitFileRev,e),h=c,s.find(".siebui-collapsible-applet-content").replaceWith(h)},error:function(e){alert(e)}})},o.prototype.detailerThreadBar=function(e){e==="show"?($(".siebui-thread").show(),setTimeout(function(){$(".siebui-thread").hide()},1e4)):e==="hide"?$(".siebui-thread").hide():alert("this mode is not supported")},o.prototype.detailerMenuBar=function(e){var t=this.GetPM(),n=$("#"+t.Get("GetFullId"));e==="show"?(n.find(".AppletButtons").show(),setTimeout(function(){n.find(".AppletButtons").hide()},1e4)):e==="hide"?n.find(".AppletButtons").hide():alert("this mode is not supported")},o.prototype.ShowScreenViewBar=function(e,t){var n=this.GetPM(),i=$("#"+n.Get("GetFullId"));if(!e){var s=n.Get("GetRecordSet")[n.Get("GetSelection")],o="";if(s)var o=s["Parent Disable Nav Flag"];o==="Y"?(i.find(".siebui-tile-left-scroll").remove(),i.find(".siebui-tile-right-scroll").remove()):(i.find(".siebui-tile-left-scroll").removeClass("siebui-player-left-scroll"),i.find(".siebui-tile-right-scroll").removeClass("siebui-player-right-scroll"))}if(t===undefined||t==="")r=!1;e&&!r?($("#_sweappmenu").show(),$(".siebui-button-toolbar").show(),$("#_swethreadbar").show(),$("#_swescrnbar").show(),$(".siebui-mobile").show(),$(".AppletMenu").show(),i.find(".siebui-applet-header").show(),$(".siebui-banner").show(),i.find(".AppletButtons").show()):($("#_sweappmenu").hide(),$(".siebui-button-toolbar").hide(),$("#_swethreadbar").hide(),$("#_swescrnbar").hide(),$(".siebui-mobile").hide(),$(".AppletMenu").hide(),i.find(".siebui-applet-header").hide(),$(".siebui-banner").hide(),i.find(".AppletButtons").hide())},o.prototype.ShowSelection=function(){SiebelAppFacade.EdetailerPlayerRenderer.superclass.ShowSelection.call(this);var e=this.GetPM().Get("GetControls"),n=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM(),r=n.Get("GetSysPref"),i=n.Get("GetCrossInd");if(e.Done||e.DoneButton)r==="Y"&&i!=="Y"?$("#"+e.Done.GetInputName()+"_Ctrl").addClass("forcehide"):e.DoneButton&&$("#"+e.DoneButton.GetInputName()+"_Ctrl").addClass("forcehide");var s=this.GetPM(),o=$("#"+s.Get("GetFullId")),u=s.Get("GetRecordSet")[s.Get("GetSelection")]
,a,f,l=this,c=!1,h,p,d=navigator.userAgent.match(/iPad/i)!=null;u&&(h=u.LitFileExt,p=h.toLowerCase());if(n.Get("Mode")==="Player"&&s.Get("GetName")===n.Get("PlayerApplet")&&n.Get("visited")==="N"||n.Get("Mode")==="Related"&&s.Get("GetName")===n.Get("RelatedApplet")&&n.Get("visited")==="N"){c=!0;if(u){var v=u["File With Path"];if(!SiebelApp.S_App.GetOfflineMode||!SiebelApp.S_App.GetOfflineMode())a=this.GenNextMediaControl(p,v,0,u["Literature Id"],u.LitFileRev),f=a,o.find(".siebui-current-media").replaceWith(f),d&&p==="pdf"&&$("#iframe").load(function(){var e=$(document.getElementById("iframe").contentWindow.document).find("img");e.length>0&&e.css("margin","auto").css("display","block")});n.Get("PlayerApplet")===s.Get("GetName")&&this.CanInvokeNavBar(s)}else $("#"+s.Get("GetFullId")).removeClass("siebui-current-media");n.AddProperty("visited","Y")}var m=!1;t&&(m=!0,t=!1);if(m){var g=new Date,n=SiebelAppFacade.ComponentMgr.FindComponent({id:SiebelApp.S_App.GetActiveView().GetName()}).GetPM(),y=g.getMonth()+1+"/"+g.getDate()+"/"+g.getFullYear()+" "+g.getHours()+":"+g.getMinutes()+":"+g.getSeconds();n.AddProperty("PlayerStartTime",y),n.AddProperty("Mode","Player"),s.ExecuteMethod("SetSesRecData")}SiebelAppFacade.DecisionManager.IsTouch()&&$(".siebui-icon-fullscreen").hide(),c&&u&&SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()&&SiebelApp.MobileFileMgr.GetHttpURLPrefix({success:function(e){a=l.GenNextMediaControl(p,u["File With Path"],0,u["Literature Id"],u.LitFileRev,e),f=a,o.find(".siebui-current-media").replaceWith(f)},error:function(e){alert(e)}})},o.prototype.EndLife=function(){t=!0,SiebelAppFacade.EdetailerPlayerRenderer.superclass.EndLife.call(this)},o.prototype.CanInvokeNavBar=function(e){var t=e,n=!1,r=!1;n=t.ExecuteMethod("CanInvokeMethod","GotoNextSet"),r=t.ExecuteMethod("CanInvokeMethod","GotoPreviousSet"),n===!1?$(".siebui-player-next-slide").addClass("siebui-player-navbar"):$(".siebui-player-next-slide").removeClass("siebui-player-navbar"),r===!1?$(".siebui-player-prev-slide").addClass("siebui-player-navbar"):$(".siebui-player-prev-slide").removeClass("siebui-player-navbar")},o.prototype.GenNextMediaControl=function(e,t,n,r,i,s){var o;n=0;var u,a,f,l=!1,c;a=localStorage.getItem("isAdfmContainer"),a==="1"&&SiebelApp.S_App.GetOfflineMode&&SiebelApp.S_App.GetOfflineMode()&&(l=!0),l&&t&&(f=t.split("\\"),e!=="zip"?u="S_LIT_"+r+"_"+i+"."+e:u="S_LIT_"+r+"_"+i+"/"+f[f.length-2]+"/"+f[f.length-1],c=s+"/"+u);if(e==="jpg")l?(o='<img id= "'+n+'" class = "siebui-current-media" src="'+c+'"/>',n++):(o='<img id= "'+n+'" class = "siebui-current-media" src="'+t+'"/>',n++);else if(e==="png")l?(o='<img id= "'+n+'" class = "siebui-current-media" src="'+c+'"/>',n++):(o='<img id= "'+n+'" class = "siebui-current-media" src="'+t+'"/>',n++);else if(e==="gif")l?(o='<img id= "'+n+'" class = "siebui-current-media" src="'+c+'"/>',n++):(o='<img id= "'+n+'" class = "siebui-current-media" src="'+t+'"/>',n++);else if(e==="mp4")l?(o='<video id= "'+n+'" class = "siebui-current-media" controls autoplay><source src="'+c+'" type="video/mp4">Your browser does not support the video tag.</video>',n++):(o='<video id= "'+n+'" class = "siebui-current-media" controls autoplay><source src="'+t+'" type="video/mp4">Your browser does not support the video tag.</video>',n++);else if(e==="pdf"){var h=navigator.userAgent.match(/(android)/i);if(!l)if(h){o='<div id="scroller"><canvas id="canvas" class = "siebui-current-media siebui-currentpdf-media" /></div>',PDFJS.workerSrc="scripts/3rdParty/pdf.worker.js",PDFJS.disableStream=!0,PDFJS.disableWorker=!0;var p=!1;PDFJS.getDocument(t).then(function(e){var t=1;e.getPage(t).then(function(e){var t=1,n=e.getViewport(t),r=document.getElementById("canvas"),i=r.getContext("2d");r.height=n.height,r.width=n.width;var s={canvasContext:i,viewport:n};e.render(s)})})}else o='<div id="scroller"><iframe id="iframe" class = "siebui-current-media siebui-currentpdf-media" src="'+t+'" />'+"</div>";else if(h){o='<div id="scroller"><canvas id="canvas" class = "siebui-current-media siebui-currentpdf-media" /></div>',PDFJS.workerSrc="scripts/3rdParty/pdf.worker.js",PDFJS.disableStream=!0,PDFJS.disableWorker=!0;var p=!1;PDFJS.getDocument(c).then(function(e){var t=1;e.getPage(t).then(function(e){var t=1,n=e.getViewport(t),r=document.getElementById("canvas"),i=r.getContext("2d");r.height=n.height,r.width=n.width;var s={canvasContext:i,viewport:n};e.render(s)})})}else o='<div id="scroller"><iframe id="iframe" class = "siebui-current-media siebui-currentpdf-media" src="'+c+'" />'+"</div>"}else e==="html"?l?(o='<embed id= "'+n+'" class = "siebui-current-media" src="'+c+'"/>',n++):(o='<embed id= "'+n+'" class = "siebui-current-media" src="'+t+'"/>',n++):e==="zip"?l?(o='<embed id= "'+n+'" class = "siebui-current-media" src="'+c+'"/>',n++):(o='<embed id= "'+n+'" class = "siebui-current-media" src="'+t+'"/>',n++):alert(_SWEgetMessage("IDS_FILE_EXTENSION"));return o},o}(),"SiebelAppFacade.EdetailerPlayerRenderer"}));
