/*<ORACLECOPYRIGHT>
* Copyright (C) 2008-2016
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
/* 16.0.0.0SIA[23057] */
typeof SiebelAppFacade.GanttRenderer=="undefined"&&(SiebelJS.Namespace("SiebelAppFacade.GanttRenderer"),define("siebel/ganttrenderer",["siebel/phyrenderer","3rdParty/team-jq-gantt/Libs/date.js","3rdParty/team-jq-gantt/Libs/platform.js","3rdParty/team-jq-gantt/ganttUtilities.js","3rdParty/team-jq-gantt/ganttGridEditor.js","3rdParty/team-jq-gantt/ganttMaster.js","siebel/ganttDateBar","siebel/ganttLegendBar"],function(){return SiebelAppFacade.GanttRenderer=function(){function Q(){SiebelAppFacade.GanttRenderer.superclass.constructor.apply(this,arguments);var e=this.GetPM();e.AttachPMBinding("IsRefreshNeeded",this.BindData,{scope:this}),e.AttachPMBinding("RevertBooking",it,{scope:this}),e.AttachPMBinding(f,Nt,{scope:this}),e.AttachPMBinding(g,Nt,{scope:this}),e.AttachPMBinding("ShowLegend",Ct,{scope:this}),e.AttachPMBinding("expcolpse",kt,{scope:this});var t=null,n=null,r=0,i=0,s={},o=0,u=0,a=0,l=600,c=e.Get("GetFullId"),h=e.Get("CustCtlrName"),p=0,d=1;e.SetProperty("InEvent",!1),this.GetAppletId=function(){return c},this.GetCustCtrlName=function(){return h},this.getGanttLegendBar=function(){return n},this.setGanttLegendBar=function(e){n=e},this.getRowsPerPage=function(){return i},this.setRowsPerPage=function(e){i=e},this.getTotalPages=function(){return u},this.setTotalPages=function(e){u=e},this.getRemainingRows=function(){return a},this.setRemainingRows=function(e){a=e},this.getGanttDateBar=function(){return t},this.setGanttDateBar=function(e){t=e},this.setMapResIndex=function(e){s=e},this.getMapResIndex=function(e){return s},this.setResColCount=function(e){o=e},this.getResColCount=function(){return o},this.setGanttCtrlHeight=function(e){l=e},this.getGanttCtrlHeight=function(){return l},this.setHasWidthbuffer=function(e){p=e},this.getHasWidthbuffer=function(){return p},this.setFirstLoad=function(e){d=e},this.getFirstLoad=function(){return d}}function G(e){var t=this.GetPM(),n=this.GetUIWrapper(e);ctrlResEl=n.GetEl(),name="",dataArray=[],mapResIndex={},resSet=t.Get("RecordSet"),reslen=0,value="",reslen=resSet?resSet.length:0;for(var r=0;r<reslen;r+=1)name=resSet[r]["Resource Name"],mapResIndex[name.toLowerCase()]=r,dataArray.push(name);this.setMapResIndex(mapResIndex),ctrlResEl.length!==0&&ctrlResEl.autocomplete("option","source",dataArray)}function Y(e){var t=this.GetPM(),n=$(".siebui-taskEditRow").height(),r=0,i,s=this.getMapResIndex();if(e){r=s[e.toLowerCase()];if(r>=0)return i=parseInt(r*n,10),$(".siebui-splitBox3").scrollTop(i),$("#"+t.Get("RecordSet")[r][t.Get("RJoinFld")]).click(),!0}return!1}function Z(e){var t=this.GetPM(),n,r,i,s,o=t.Get("RecordSet"),u=o.length,a=t.Get("RJoinFld");for(var f=0;f<u;f+=1){r=$("#"+o[f][a]).attr("pid");if(r===""||r==="ORPHANED")n=$("#"+o[f][a]).attr("id"),i=$("#"+n).children()[0],s=$(i.lastChild).children()[0],e?$(s).hasClass("ui-icon-triangle-1-e")&&($(s).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-se"),$('*[pid="'+n+'"]').slideToggle(30)):$(s).hasClass("ui-icon-triangle-1-se")&&($(s).removeClass("ui-icon-triangle-1-se").addClass("ui-icon-triangle-1-e"),$('*[pid="'+n+'"]').slideToggle(30))}}function et(e){var t=e.data.ctx,n=t.GetPM(),r=e.data.ctx,i=$(".siebui-splitBox3").scrollLeft(),s=0,o=$(".siebui-splitBox3").width(),u=$("#s_"+t.GetAppletId()+"_div").find("#s_ganttleft"),a=$("#s_"+t.GetAppletId()+"_div").find("#s_ganttRight"),f=0;a.hasClass("siebui-shrinkRight")?(a.removeClass("siebui-shrinkRight"),u.hide()):(u.show(),a.addClass("siebui-shrinkRight"));var l=$("#"+r.GetCustCtrlName()),c=l.innerWidth();s=$(".siebui-splitBox3").width();if(r.getHasWidthbuffer()==1){var h=n.Get("ScrollbarWidth");f=(s-h)/c*100}else f=s/c*100;$(".siebui-splitBox2").width(f+"%"),$(".siebui-splitBox3").scrollLeft(i*s/o),wt.call(t)}function tt(e){var t=e.data.ctx.GetPM(),n=t.Get("GetControls"),r=t.Get("TST"),i=t.Get("datePaddingMap"),s=0,o=e.currentTarget.id.replace("_Ctrl",""),u="",a=0,f=t.Get("TotalHPages"),l=f;SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),a|=2,a|=4,a|=8,a|=16,t.SetProperty("PanesToRefresh",a);for(var c in n)if(n[c].GetInputName()===o){u=n[c].GetName(),t.SetProperty("NotifyTSButtonClk","TRUE");if(r!=u){t.SetProperty("TST",u),t.SetProperty("InEvent",!1),i[u]&&(s=i[u]),l=1+s*2,l!==f&&(t.SetProperty("TotalHPages",l),t.SetProperty("IsTotalHPagesChanged","Y")),i[u]&&(s=i[u]),l=1+s*2,l!==f&&(t.SetProperty("TotalHPages",l),t.SetProperty("IsTotalHPagesChanged","Y")),Lt.call(e.data.ctx),e.data.ctx.getGanttDateBar().setNavigationValues();break}}n=null}function nt(e){var t,n=this.GetPM(),r,i,s,o,u,a,f,l,c,h,p,d,v,m;r=n.Get("LIC Field")[e],i=n.Get("Status Abbreviations"),s=i.substring(i.indexOf(r)+r.length+1,i.indexOf(";",i.indexOf(r))),o=n.Get("Booking Colors"),u=n.Get("RecordSet"),m=u?u.length:0;for(var g=0;g<m;g+=1){var y=u[g][n.Get("RJoinFld")];t=n.ExecuteMethod("gettaskSeqEvents",y);if(t)for(v=0;v<t.length;v++)d=$('*[taskId="'+t[v]+'"]').find(".siebui-layout"),l=n.ExecuteMethod("getEvent",y,t[v]),c=l[s],h=s+"_"+c,p=o[h],p||(p=n.Get("EventDefaultColor")),d.css({"background-color":p})}n.SetProperty("Color Display By",r),this.getGanttLegendBar().createLegends(n.ExecuteMethod("prepareLegendMap"),n.Get("ShowLegend"))}function rt(e,t){var n=e.getMinutes(),r;return r=parseInt((n+t/2)/t,10)*t,e=new Date(e.setMinutes(r,0)),e}function it(){var e=this.GetPM(),t=e.Get("RevertDate"),n=e.Get("RevertInfo"),r,i,s,o,u,a,f=t?t.FROMRESINDEX:-1,l=t?t.TORESINDEX:-1,c=e.Get("Color Display By"),h=e.Get("Status Abbreviations"),p;h&&c&&(p=h.substring(h.indexOf(c)+c.length+1,h.indexOf(";",h.indexOf(c))));var d={Statabb:p,EventColor:e.Get("Booking Colors"),TST:e.Get("TST"),configSpacePatternFlag:e.Get("ConfigSpacePattern"),EventDefaultColor:e.Get("EventDefaultColor")};f&&f!==-1&&(u="",$("#UGrid").find("#"+f.toString()+" div.siebui-eventContainer").remove(),a=e.Get("RecordSet")[f].EVENTS,u='<div class="siebui-eventContainer">'+this.preparerowtasks(a,f,d)+"</div></div>",$("#UGrid").find("#"+f.toString()).append(u)),l&&l!==-1&&(u=""
,$("#UGrid").find("#"+l.toString()+" div.siebui-eventContainer").remove(),a=e.Get("RecordSet")[l].EVENTS,u='<div class="siebui-eventContainer">'+this.preparerowtasks(a,l,d)+"</div></div>",$("#UGrid").find("#"+l.toString()).append(u)),e.SetProperty("RevertDate",""),d=null}function st(e){var t='<div id="gantEditorTemplates" class="siebui-gantEditorTemplates">'+ot.call(this)+"</div>";return t}function ot(){var e=this.GetPM().Get("RESOURCEHEADER"),t=e.length,n=parseFloat(100/t,10),r='<span class="appletButton siebui-ganttFilterPane"><span class="siebui-ganttFilter" ot="span" rn="gearIcon" un="gearIcon" title="Filter Panel"></span></span>',i='<div class="siebui-gdfHeaderRow">',s=this.GetPM().Get(l),o="",u=SiebelApp.S_App.IsAutoOn();this.setResColCount(t),s&&(o=utils.TokenizeString(s,":"));for(var a=0,f="";a<t;a++)f+="<div ",o!==""&&(f=f+'style = "width:'+o[a]+'px;"'),a===t-1?(f=f+' class="siebui-gdfColHeader gdfResizable gdfied siebui-lastColumn" id="siebui-gdfColHeader'+a+'" data-idd-name="'+e[a].IDD+'" ColNum ="'+a+'"><div class = "siebui-headerData"',u==="true"&&(f+='ot = "span" rn = "'+e[a].NM+'" un = "RH'+e[a].NM+'"'),f+=">"+e[a].NM+"</div></div>"):(f=f+' class="siebui-gdfColHeader gdfResizable gdfied" id="siebui-gdfColHeader'+a+'" data-idd-name="'+e[a].IDD+'" ColNum ="'+a+'"><div class = "siebui-headerData"',u==="true"&&(f+='ot = "span" rn = "'+e[a].NM+'" un = "RH'+e[a].NM+'"'),f+=">"+e[a].NM+"</div></div>");return i=i+f+"</div></div>",i}function ut(t,n,r,i,s){var o=this.GetPM(),u=s.RHeaderMap,f=u.length,c=parseFloat(100/f,10),h=this.getRowsPerPage(),p=i?i.length:0,d=p>h?h:p,v="",m="",g=o.Get(l),y="";appletId=this.GetAppletId(),fld=s.RJoinFld,parentfld=s.RParentFld,Icons="Icons",strAutoOn=SiebelApp.S_App.IsAutoOn(),attr="",g&&(y=utils.TokenizeString(g,":"));for(var b=t,w="";b<n;b+=1){w=w+'<div  class="siebui-gdfRow siebui-gdfRowRes siebui-taskEditRow row'+b.toString()+""+i[b].STCLS+'"  index="'+b.toString()+'"  taskId="'+i[b][fld]+'"    pid="'+i[b][parentfld]+'"  id="'+i[b][fld],strAutoOn==="true"&&(w+='"ot = "row" rn = "RR'+i[b][fld]+'" un = "RR'+i[b][fld]+'"'),w+='" >';for(var E=0,S="";E<f;E++){var x=u[E].DDFLD?a:"";E===0?(S=S+'<div class="siebui-gdfCell siebui-gdfHResizing ui-resizable siebui-ResCol'+appletId+E+'" ',y!==""&&(S=S+'style = "width:'+y[E]+'px;"'),S=S+'> <div class = "siebui-defaultIndent" style=padding-left:'+i[b].LEVEL*5+"px;>"+i[b][Icons]+'<div class="'+i[b].CLS+'" taskId = "'+i[b][fld]+'"></div>'):E===f-1?(S=S+'<div class="siebui-gdfCell siebui-gdfHResizing ui-resizable siebui-lastColumn siebui-ResCol'+appletId+E+'" ',y!==""&&(S=S+'" style = "width:'+y[E]+'px;"'),S+='><div class="siebui-resIndent siebui-defaultIndent">'):(S=S+'<div class="siebui-gdfCell siebui-gdfHResizing ui-resizable siebui-ResCol'+appletId+E+'" ',y!==""&&(S=S+'" style = "width:'+y[E]+'px;"'),S+='><div class="siebui-resIndent siebui-defaultIndent">'),attr="data-drilldown-type='RGrid' data-drilldown-id='"+i[b][u[E].DDFLD]+"'",strAutoOn==="true"&&(attr+=" ot = 'a' rn = 'RR "+i[b][u[E].FLD]+"' un = 'RR"+i[b][fld]+"Col"+E+i[b][u[E].FLD]),S+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:"siebui-showResTooltip "+x,value:HtmlEncode(i[b][u[E].FLD]),attrs:attr}),S+="</div></div>"}w=w+S+"</div>"}return m=m+w+"</div>",m}function at(e,t,n,r,i){var s='<div class="'+n+'">';fld=i.RJoinFld,parentFld=i.RParentFld,ResPaneRefresh=(this.GetPM().Get("PanesToRefresh")&4)===0,strAutoOn=SiebelApp.S_App.IsAutoOn();for(var o=e,u="";o<t;o+=1){var a=o.toString(),f=ResPaneRefresh&&r[o][parentFld]!=="ORPHANED"?$("#"+r[o][fld]).css("display"):"block",u=u+'<div  style="display:'+f+'" class="siebui-gdfRow siebui-taskEditUtility row'+a+'"  pid="'+r[o][parentFld]+'"   taskId="'+r[o][fld]+'"  id="'+o.toString()+'" ';strAutoOn==="true"&&(u+='ot = "row" rn = "UR'+r[o][fld]+'" un = "UR'+r[o][fld]+'"'),u+='><div class="siebui-eventContainer">'+this.preparerowtasks(r[o].EVENTS,o,i)+"</div></div>"}return s=s+u+"</div>",s}function ft(e){var t=$(this).closest(".siebui-gdfRow").attr("taskid");t!==""&&t!="ORPHANED"&&$('*[pid="'+t+'"]').slideToggle(30),$(this).hasClass("ui-icon-triangle-1-e")?$(this).removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-se"):$(this).removeClass("ui-icon-triangle-1-se").addClass("ui-icon-triangle-1-e")}function lt(e){if(!$(this).attr("aria-label")){var t=e.data.ctx.GetPM(),n="",r="",i,s="",o=SiebelApp.S_App.NewPropertySet();e.data.attr==="Id"?s=$(this).closest(".siebui-taskEditRow").attr("Id"):e.data.attr==="DateVal"&&(s=$(this).attr("DateVal"));if(s){o.SetProperty(e.data.Input,s),o.SetProperty("Pane",e.data.Pane),t.ExecuteMethod("getTooltip",o),r=t.Get("tooltipMap");if(r){i=r.EnumProperties(!0);while(i)n!==""?n=n+"\n"+String(r.GetProperty(i)):n=String(r.GetProperty(i)),i=r.EnumProperties(!1)}$(this).attr("aria-label",n),$(this).attr("title",n)}}}function ct(e){if(!$(this).attr("aria-label")){var t=e.data.ctx.GetPM(),n="",r,i="",s,o=SiebelApp.S_App.NewPropertySet(),u=$(this).attr("taskId"),a=t.Get("RecordSet")[$(this).closest(".siebui-gdfRow").attr("id")][t.Get("RJoinFld")];if(u&&a){i=t.ExecuteMethod("getEvent",a,u);if(i){i.FI?o.SetProperty("FunId",i.FI):o.SetProperty("ResourceId",a),o.SetProperty("BookingId",u),o.SetProperty("Pane","Pane 2"),t.ExecuteMethod("getTooltip",o),r=t.Get("tooltipMap");if(r){s=r.EnumProperties(!0);while(s)n!==""?n=n+"\n"+String(r.GetProperty(s)):n=String(r.GetProperty(s)),s=r.EnumProperties(!1)}}$(this).attr("aria-label",n),$(this).attr("title",n)}}}function ht(e){var t=e.data.ctx,n=0,r=t.GetPM(),i=e.currentTarget.offsetLeft;if(r.ExecuteMethod("CanExtendShrinkEvents")){var s,o=r.Get("fx")*r.Get("Round Minutes Events")*6e4;o||(o=10),$("#s_"+t.GetAppletId()+"_div").find(".siebui-taskBox.Rsizable").resizable({containment:$("#s_"+t.GetAppletId()+"_div").find("#UGrid"),handles:"e,w",minWidth:o,start:function(e,t){},stop:function(e,i){var o,u,a,f,l=null,c,h,p=null,d,v,m,g,y,b,w,E=null,S=null,x={};v=$(this).closest("div.siebui-gdfRow").attr
("Id"),b=r.Get("RecordSet")[v][r.Get("RESOURCEHEADER")[0].FLD],v=r.Get("RecordSet")[v][r.Get("RJoinFld")],m=$(this).attr("taskId"),g=r.ExecuteMethod("getEvent",v,m),y=g.FI,o=i.position.left,s=i.originalPosition.left,h=new Date(g.ET),c=new Date(g.ST),aendDate=new Date(g.AET),astDate=new Date(g.AST),l=c.getTime(),E=h.getTime()-c.getTime(),S=aendDate.getTime()-astDate.getTime();var T=r.Get("TurnTime");T==="Y"?i.size.width>i.originalSize.width?u=i.size.width-i.originalSize.width-(i.size.width-i.originalSize.width)*(S-E)/(S*2):u=i.size.width-i.originalSize.width-(i.size.width-i.originalSize.width)*(S-E)/(E*2):u=i.size.width-i.originalSize.width,parseInt(o,10)!==parseInt(s,10)?(r.Get("EndTime")?l=t.calcNonContiguousTime(o):r.Get("fx")!==0&&(p=Math.round(u/r.Get("fx"))),l-=p,c=new Date(l),c=rt(c,r.Get("Round Minutes Events"))):(r.Get("EndTime")?(a=o*1+i.size.width*1,f=t.calcNonContiguousTime(a)):(r.Get("fx")!==0&&(p=Math.round(u/r.Get("fx"))),f=l+E+p),h=new Date(f),h=rt(h,r.Get("Round Minutes Events"))),f=h.format("HH:mm:ss"),l=c.format("HH:mm:ss"),w=$(this).closest("div.siebui-taskEditUtility"),x.FROMRESINDEX=$(w).attr("id"),r.SetProperty("RevertDate",x),d=SiebelApp.S_App.NewPropertySet(),d.SetProperty("Resource Id",v),d.SetProperty("Resource",b),d.SetProperty("Function Id",y),d.SetProperty("booking Id",m),d.SetProperty("Start Date",c.format("MM/dd/yyyy")),d.SetProperty("Start Time",l),d.SetProperty("End Time",f),d.SetProperty("End Date",h.format("MM/dd/yyyy")),d.SetProperty("End DTTM",h.format("MM/dd/yyyy HH:mm:ss")),d.SetProperty("Start DTTM",c.format("MM/dd/yyyy HH:mm:ss")),d.SetProperty("operation","ExtendShrink"),n=0,n|=2,n|=16,d.SetProperty("PanesToRefresh",n),r.SetProperty("PanesToRefresh",n),r.SetProperty("InEvent",!0),r.ExecuteMethod("InvokeOperation",d)}})}}function pt(e){var t=e?e.data.ctx:this,n=t.GetPM(),r=n.Get("Resource Id"),i=n.Get("ResIDtoIndex")[r];if(e){var s=$(this).attr("taskid"),o=n.Get("ResIDtoIndex")[s];$("#s_"+t.GetAppletId()+"_div").find(".row"+i).removeClass("siebui-rowSelected"),$("#s_"+t.GetAppletId()+"_div").find(".row"+o).addClass("siebui-rowSelected"),n.SetProperty("Resource Id",s)}else i!=="undefined"&&$("#s_"+t.GetAppletId()+"_div").find(".row"+i).addClass("siebui-rowSelected")}function dt(e){var t=e.data.ctx,n=t.GetPM(),r=$(this).scrollLeft()+e.clientX-$(this).offset().left,o=$(e.target).closest(".siebui-gdfRow").attr("id"),u="",a,f,l,c,h,p,d,v,m,g=0;o&&(u=n.Get("RecordSet")[o][n.Get("RESOURCEHEADER")[0].FLD],m=n.Get("RecordSet")[o][n.Get("RJoinFld")]),n.Get("EndTime")?a=new Date(t.calcNonContiguousTime(r)):a=r*(n.Get(s)-n.Get(i))/$("#UGrid").width()+n.Get(i),f=new Date(a),l=f.getMinutes(),c=parseInt((l+7.5)/15,10)*15,f=new Date(f.setMinutes(c,0)),h=f.format("MM/dd/yyyy"),p=f.format("HH:mm:ss"),d=f.format("MM/dd/yyyy HH:mm:ss"),v=SiebelApp.S_App.NewPropertySet(),v.SetProperty("Resource Id",m),v.SetProperty("Resource",u),v.SetProperty("Start Date",h),v.SetProperty("Start Time",p),v.SetProperty("Start DTTM",d),v.SetProperty("operation","Create Task"),g=0,g|=2,g|=16,v.SetProperty("PanesToRefresh",g),n.SetProperty("PanesToRefresh",g),n.SetProperty("InEvent",!0);var y=SiebelApp.S_App.GetName();y!=="Siebel eDealer"&&n.ExecuteMethod("InvokeOperation",v)}function vt(e){var t=e.data.ctx,n=t.GetPM(),r=$("#s_"+n.Get("GetFullId")+"_div").find(".siebui-splitBox3"),i=r.offset(),s=i.top+r.height(),o=null,u=null,a=10,f=100,l=20;$(this).draggable({containment:$("#s_"+n.Get("GetFullId")+"_div").find("#UGrid"),scrollSensitivity:1,zIndex:9999,drag:function(e,t){var c=!1;e.pageY-i.top<=a&&(c=!0,clearInterval(o),clearInterval(u),o=setInterval(function(){n.Get("InEvent")===!1&&(clearInterval(o),clearInterval(u)),r.scrollTop(r.scrollTop()-l)},f)),e.pageY>=s-a&&(c=!0,clearInterval(o),clearInterval(u),u=setInterval(function(){n.Get("InEvent")===!1&&(clearInterval(o),clearInterval(u)),r.scrollTop(r.scrollTop()+l)},f)),c||(clearInterval(o),clearInterval(u))},start:function(e,t){var r=$(this).closest("div.siebui-gdfRow").attr("taskId"),i=$(this).closest("div.siebui-gdfRow").attr("Id");$(this).draggable("option","sResId",r),$(this).draggable("option","resindex",i),$(this).draggable().css({"margin-top":0}),n.SetProperty("InEvent",!0)}})}function mt(e){var t=e.data.ctx,n=t.GetPM();K={mask:!0},n.SetProperty("FLD_NAME",this.getAttribute("data-idd-name")),n.Get("SORT_ORDER")?n.SetProperty("SORT_ORDER",0):n.SetProperty("SORT_ORDER",1),n.ExecuteMethod("SortRefreshGantt",K)}function gt(e){e.stopPropagation();var t=SiebelApp.S_App.GetName();if(t==="Siebel eDealer")return;if($(this).hasClass("Dragpble")||$(this).hasClass("DClickable")){var n=e.data.ctx,r=n.GetPM(),i=$(this).attr("taskId"),s=$(e.target).closest(".siebui-gdfRow").attr("id"),o=s,u=0;if(i&&s){s=r.Get("RecordSet")[s][r.Get("RJoinFld")];var a=r.ExecuteMethod("getEvent",s,i),f=a.FI,l=a.GS,c=a.FSTP,h=r.Get("RecordSet")[o][r.Get("RESOURCEHEADER")[0].FLD],p=SiebelApp.S_App.NewPropertySet(),d=SiebelApp.S_App.NewPropertySet();p.SetProperty("booking Id",i),p.SetProperty("Function Id",f),p.SetProperty("Resource Id",s),p.SetProperty("Resource",h),p.SetProperty("Inventory Status",l),p.SetProperty("Function Space Type",c),p.SetProperty("operation","Show Task Details"),u=0,u|=2,u|=16,p.SetProperty("PanesToRefresh",u),r.SetProperty("PanesToRefresh",u),r.SetProperty("InEvent",!0),r.ExecuteMethod("InvokeOperation",p)}}}function yt(e){var t=e.data.ctx,n=t.GetPM();$("#s_"+t.GetAppletId()+"_div").find(".siebui-taskEditUtility").droppable({drop:function(e,r){var o=null,u=$(this).attr("Id"),a=r.draggable.attr("taskId"),f,l,c,h,p,d,v,m,g,y,b=n.Get("RecordSet")[u][n.Get("RESOURCEHEADER")[0].FLD],w=0,E=n.Get(i),S={},x,T,N=$(this).attr("taskid");if(n.Get("EndTime"))o=new Date(t.calcNonContiguousTime(r.position.left));else{o=new Date(Math.round(r.position.left*(n.Get(s)-E)/$("#UGrid").width()+E));var C=n.Get("TurnTime");C==="Y"&&(OResId=$(r.draggable).draggable("option","sResId"),v=n.ExecuteMethod("getEvent",OResId,a),o=new Date(o.getTime()+((new Date(v.ST)).getTime
()-(new Date(v.AST)).getTime())))}f=parseInt((o.getMinutes()+7.5)/15,10)*15,o=new Date(o.setMinutes(f,0)),l=o.format("MM/dd/yyyy"),c=o.format("HH:mm:ss"),h=o.format("MM/dd/yyyy HH:mm:ss"),p=SiebelApp.S_App.NewPropertySet(),n.SetProperty("InEvent",!0),d=$(r.draggable).draggable("option","sResId"),x=$(r.draggable).draggable("option","resindex"),v=n.ExecuteMethod("getEvent",d,a),S.FROMRESINDEX=x,S.TORESINDEX=u,n.SetProperty("RevertDate",S),m=v.FI,g=v.DDID,y=new Date(o.getTime()+((new Date(v.ET)).getTime()-(new Date(v.ST)).getTime())),p.SetProperty("Resource Id",N),p.SetProperty("booking Id",a),p.SetProperty("Resource",b),p.SetProperty("Start Date",l),p.SetProperty("Start Time",c),p.SetProperty("Start DTTM",h),p.SetProperty("End Time",y.format("HH:mm:ss")),p.SetProperty("End DTTM",y.format("MM/dd/yyyy HH:mm:ss")),p.SetProperty("End Date",y.format("MM/dd/yyyy")),p.SetProperty("Function Id",m),p.SetProperty("Quote Id",g),p.SetProperty("Pre Resource Id",d),p.SetProperty("operation","DragnDrop"),w=0,w|=2,w|=16,p.SetProperty("PanesToRefresh",w),n.SetProperty("PanesToRefresh",w),n.ExecuteMethod("InvokeOperation",p),n.SetProperty("InEvent",!1)}})}function bt(e){var t=20,n=Number(e.Get("TotalHPages"),10)>0?15:0;return Math.floor(($("#s_"+this.GetAppletId()+"_div").find(".siebui-splitBox1").height()-n)/t,10)}function wt(){var e=0,t=this.GetPM(),n=0,r=$("#"+this.GetCustCtrlName()),o=$(".siebui-vSplitBar"),u=21;o.length>0&&(e=$("#UGrid").width(),n=e/(t.Get(s)-t.Get(i)),t.SetProperty("MinGanttsize",e),t.SetProperty("fx",n))}function Et(e){$.splittify.splitterBar=$(this);var t=0,n=SiebelApp.S_App.NewPropertySet(),r=e.data.ctx,i=r.GetPM(),s=$("#s_"+r.GetAppletId()+"_div"),o,u=$(".siebui-splitBox3").scrollLeft(),a=0,f=$(".siebui-splitBox3").width();reclen=i.Get("RecordSet")?i.Get("RecordSet").length:0,$("body").unselectable().bind("mousemove",function(e){var n=$.splittify.splitterBar,o=e.pageX-n.parent().offset().left,l=n.parent().width(),c=i.Get("ScrollbarWidth"),h=parseInt($(".siebui-resourceContainer").css("width"));if(o>0&&o<h){t=l;var p=parseFloat(o/l*100,2),d=parseFloat((o+n.width())/l*100,2),v=parseFloat((l-(o+n.width()))/l*100,2),m=c/l*100;n.css({left:p+"%"}),s.find(".siebui-resourceContainer").css({width:p+"%"}),r.getHasWidthbuffer()==1?s.find(".siebui-splitBox2").css({left:d+"%",width:v-m+"%"}):s.find(".siebui-splitBox2").css({left:d+"%",width:v+"%"}),s.find(".siebui-splitBox3").css({left:d+"%",width:v+"%"}),a=$(".siebui-splitBox3").width(),$(".siebui-splitBox3").scrollLeft(u*a/f)}}).bind("mouseup",function(e){$(this).unbind("mousemove").unbind("mouseup").clearUnselectable();var s=t;wt.call(r),o=$.splittify.splitterBar.offset().left-$("#"+r.GetCustCtrlName()).offset().left,i.SetProperty(c,o),n.SetProperty("splPos",o),i.ExecuteMethod("saveUserPref",n),delete $.splittify.splitterBar})}function St(e){var t=this.GetPM(),n=$("#"+this.GetCustCtrlName()),r=n.innerWidth(),i=t.Get("Splitter Position"),s=t.Get("ScrollbarWidth"),o=$("#s_"+this.GetAppletId()+"_div"),u=parseInt($(".siebui-resourceContainer").css("width")),a=o.find(".siebui-vSplitBar"),f=a.width(),l=o.find(".siebui-gdfCell");i===""?l.length>0?i=l.css("width"):i=h:i=Math.min(i,u);var c=parseFloat(parseInt(i,10)/r*100,2),p=parseFloat((parseInt(i,10)+f)/r*100,2),d=s/r*100,v=$("#RGrid");a.css({left:c+"%"}),v.get(0).scrollHeight>v.get(0).offsetHeight?(o.find(".siebui-splitBox2").css({left:p+"%",width:100-p-d+"%"}),this.setHasWidthbuffer(1)):(o.find(".siebui-splitBox2").css({left:p+"%",width:100-p+"%"}),this.setHasWidthbuffer(0)),o.find(".siebui-splitBox3").css({left:p+"%",width:100-p+"%"})}function xt(e){var t=e.data.ctx,n=t.GetPM(),r=SiebelApp.S_App.NewPropertySet(),i=".siebui-ResCol"+t.GetAppletId()+$(this).attr("ColNum"),s=$("#s_"+t.GetAppletId()+"_div"),o=e.data.ctx.getResColCount(),u="",a=$(".siebui-gdfColHeader").css("min-width"),f=$(".siebui-gdfColHeader").css("max-width");$(this).resizable({alsoResize:i,handles:"e",minWidth:a,maxWidth:f,start:function(e,t){},stop:function(e,t){$(i).css("height","");for(var a=0;a<o;a++)u=u+s.find("#siebui-gdfColHeader"+a).width()+":";n.SetProperty(l,u),r.SetProperty("colWidth",u),n.ExecuteMethod("saveUserPref",r)}})}function Tt(){$(".siebui-splitBox3").scrollTop(this.GetPM().Get("VScrollPos"))}function Nt(){if(this.getGanttDateBar()!=null){var e=this.GetPM();$("#s_"+this.GetAppletId()+"_div").find("#ganttDateLbl").html(e.ExecuteMethod("getDateRange","")),$("#s_"+this.GetAppletId()+"_div").find("#ganttdatePicker").val(e.Get(f))}}function Ct(){var e=this.GetPM(),t,n,r=e.Get("ShowLegend"),i=$("#"+this.GetCustCtrlName()),s=$("#"+this.GetAppletId()+"_colorcodelegend");this.getGanttLegendBar().ShowLegends(r),t=i.css("height"),n=s.css("height"),t=t?Number(t.substr(0,t.length-2)):0,n=n?Number(n.substr(0,n.length-2)):0,r?i.css("height",t-n):i.css("height",t+n)}function kt(){var e=this.GetPM(),t=e.Get("expcolpse");Z.call(this,t)}function Lt(){var e=this.GetPM(),t=e.Get("GetControls"),n=e.Get("TST"),r=t[n];r&&($("#s_"+this.GetAppletId()+"_div").find(".siebui-buttonPressed").removeClass("siebui-buttonPressed"),$("#s_"+this.GetAppletId()+"_div").find("#"+r.GetInputName()+"_Ctrl").addClass("siebui-buttonPressed")),t=null}function At(e){var t=e.data.ctx,n=t.pm;e.srcElement?value=e.srcElement.innerHTML:value=e.target.value,Z.call(t,!0),Y.call(t,value)&&(e.srcElement?e.srcElement.innerHTML="":e.target.value="")}function Ot(e){e.which===$.ui.keyCode.ENTER&&$(this).autocomplete("close")}function Mt(e){var t=$(this),n=e.data.iScroll,r=e.data.ctx.GetPM(),i=t.scrollLeft(),s=e.data.prevScroll;$(".siebui-splitBox2").scrollLeft(i);if(r.Get("InEvent")===!1)if(s<i||n===1){if(t[0].scrollWidth<t[0].scrollLeft+t[0].offsetWidth+1){r.SetProperty("NotifyTSButtonClk","TRUE"),sDate=new Date(r.Get(f)),isNaN(sDate.getDate())||(sDate.setDate(sDate.getDate()+r.ExecuteMethod("getTimeScaleUnits")),s=0,r.ExecuteMethod("RefreshGanttChart",sDate.format(d)),n=1,t.scrollLeft(t[0].scrollLeft-10));return}$(e.data.el).data("SCROLL_BUTTON")===!0&&n===1?t.scrollLeft
(t[0].scrollLeft+5):n=0}else if(s>i||n===2){if($(this)[0].scrollLeft===0&&r.Get("TotalHPages")>1){r.SetProperty("NotifyTSButtonClk","TRUE"),sDate=new Date(r.Get(f)),isNaN(sDate.getDate())||(sDate.setDate(sDate.getDate()-r.ExecuteMethod("getTimeScaleUnits")),s=t[0].scrollWidth,r.ExecuteMethod("RefreshGanttChart",sDate.format(d)),n=2,t.scrollLeft(t[0].scrollLeft+10));return}$(e.data.el).data("SCROLL_BUTTON")===!0&&n===2?t.scrollLeft(t[0].scrollLeft-5):n=0}n=0,e.data.iScroll=0,s=$(".siebui-splitBox3").scrollLeft(),e.data.prevScroll=s}function _t(e){$(".siebui-resTable").scrollTop($(".siebui-VScroll").scrollTop())}function Dt(e){var t=0,n=e.data.ctx.GetPM();t|=2,t|=16,n.SetProperty("PanesToRefresh",t),n.SetProperty("Display Toggle",e.data.CW.GetValue()),n.ExecuteMethod("InvokeServer")}function Pt(e){var t=e.data.ctx.GetPM(),n=SiebelApp.S_App.NewPropertySet(),r=e.data.CW.GetValue();t.SetProperty("Color Display Toggle",r),n.SetProperty("Color Display Toggle",r),t.ExecuteMethod("saveControlValues",n),nt.call(that,r)}var e=SiebelJS.Dependency("SiebelApp.Constants"),t=e.get("SWE_GANTT_DRILLDOWN_ID"),n=e.get("SWE_GANTT_ACTIVITY_LABEL"),r=e.get("SWE_GANTT_RENDER_INFO"),i=e.get("SWE_GANTT_STARTMILLIS"),s=e.get("SWE_GANTT_ENDMILLIS"),o=e.get("SWE_GANTT_DRILLDOWN_CLS"),u="ICON_INFO",a=e.get("SWE_GANTT_DRILLDOWN_CLS"),f=e.get("SWE_GANTT_START_DATE"),l="Column Width",c="Splitter Position",h="170",p=30,d="MM/dd/yyyy",v=e.get("SWE_GANTT_ACTIVITY_START_TIME"),m=e.get("SWE_GANTT_DAYINFO"),g=e.get("SWE_GANTT_TIME_SCALE"),y=e.get("SWE_GANTT_COLOR"),b=e.get("SWE_GANTT_ACTIVITY_END_TIME"),w=e.get("SWE_GANTT_ACTIVITY_NO_DAYS_IN_WEEK"),E=e.get("SWE_GANTT_ACTIVITY_WEEK_DAY_START"),S=e.get("SWE_GANTT_BOTTOMAXIS"),x=e.get("SWE_GANTT_NOOFHRS"),T=e.get("SWE_GANTT_SPL_DATE"),N=e.get("SWE_GANTT_DAY_HOUR"),C=e.get("SWE_GANTT_DAY_TWOHOUR"),k=e.get("SWE_GANTT_DAY_DAY_FOURHOUR"),L=e.get("SWE_GANTT_DAY_DAYPART"),A=e.get("SWE_GANTT_WEEK_DAY_DAYPART"),O=e.get("SWE_GANTT_MONTH_DOW_DAYPART"),M=e.get("SWE_GANTT_WEEK_DAY"),_=e.get("SWE_GANTT_MONTH_DAY"),D=e.get("SWE_GANTT_MONTH_DOW"),P=e.get("SWE_GANTT_3MONTH_DOW"),H=e.get("SWE_GANTT_DAY_DAY_HALFHOUR"),B=e.get("SWE_GANTT_DAY_DAY_QUARTERHOUR"),j=e.get("SWE_GANTT_YEAR_MONTH"),F=e.get("SWE_GANTT_YEAR_WEEK"),I=e.get("SWE_GANTT_MONTH_WEEK"),q=SiebelApp.S_App.LocaleObject,R="Weekends",U="TS COLOR",z="Hour Axis Color",W="MM/dd/yyyy HH:mm:ss",X="MM/DD/YYYY HH:MM:SS",V="",J=1,K={mask:!0};return SiebelJS.Extend(Q,SiebelAppFacade.PhysicalRenderer),Q.prototype.ShowUI=function(){var e,t=this.GetPM(),n="",i,s,o,u,a,f=this.getGanttCtrlHeight(),l=SiebelApp.S_App.IsAutoOn(),c="";SiebelAppFacade.GanttRenderer.superclass.ShowUI.call(this),i=$("#s_"+this.GetAppletId()+"_div").find("#s_ganttleft"),i&&(i.hide(),a=SiebelApp.S_App.GetName(),a==="Siebel Loyalty"||a==="Siebel Consumer Sector"||a==="Siebel eDealer"?n="":(n='<span class="appletButton siebui-ganttFilterPane"><span class="siebui-ganttFilter" title="Filter Panel"',l==="true"&&(n+=' ot="span" rn="gearIcon" un="gearIcon"'),n+="></span></span>"),t.SetProperty("FilterGantt_CLS",n)),$("#s_"+this.GetAppletId()+"_div").find("#siebui-iconSection").append(n),t.Get("DateBarControl")&&(o=$("#"+t.Get("DateBarControl")),o&&(this.setGanttDateBar(new SiebelAppFacade.GanttDateBar),this.getGanttDateBar().ShowUI(t,o),this.getGanttDateBar().BindEvents(),l==="true"&&$("#s_"+this.GetAppletId()+"_div").find(".siebui-ganttDate .ui-datepicker-trigger").attr("rn","Choose a Date").attr("un","Choose a Date").attr("ot","ImageControl"),this.getGanttDateBar().setNavigationValues()));var h=new GanttMaster;t.Get("LegendControl")?(u=$("#"+t.Get("LegendControl")),u&&(this.setGanttLegendBar(new SiebelAppFacade.GanttLegendBar),this.getGanttLegendBar().init(u,this.GetAppletId()+"_colorcodelegend"),this.getGanttLegendBar().createLegends(t.ExecuteMethod("prepareLegendMap"),t.Get("ShowLegend")),f-=u.height(),ganttLeftHeight=parseInt(f,10)+u.height()+8)):ganttLeftHeight=parseInt(f,10)+8,$("#s_"+this.GetAppletId()+"_div").find("#s_ganttFilterPane").addClass("siebui-ganttReportPane siebui-inrGanttFilterPane"),e=$("#"+this.GetCustCtrlName()).addClass("siebui-ganttControl"),e.css({height:parseInt(f,10)}),h.init(e,t.Get(r)),this.setRowsPerPage(bt.call(this,t)),$(".siebui-splitBox3").addClass("siebui-VScroll"),$("#s_ganttleft").css({height:ganttLeftHeight}),Lt.call(this)},Q.prototype.BindData=function(){SiebelAppFacade.GanttRenderer.superclass.BindData.call(this);var e=this.GetPM(),t,n,r=this.getRowsPerPage(),i=0,s=0,o=0,u=0,a={},f="",l="",c=1,h=e.Get("PanesToRefresh"),p=0,d=0,v=e.Get("GetControls"),m=v.GoToResource,g=0,y="",b="",w=e.Get("Scale_factor")*100*e.Get("TotalHPages"),E=e.Get("Color Display By"),S=e.Get("Status Abbreviations"),x,T=this.GetPM().Get("RESOURCEHEADER").length,N;S&&E?x=S.substring(S.indexOf(E)+E.length+1,S.indexOf(";",S.indexOf(E))):S?x=S.substring(S.indexOf(",")+1,S.length-1):x="GS";var C={RJoinFld:e.Get("RJoinFld"),RParentFld:e.Get("RParentFld"),Statabb:x,EventColor:e.Get("Booking Colors"),TST:e.Get("TST"),EventDefaultColor:e.Get("EventDefaultColor"),RHeaderMap:e.Get("RESOURCEHEADER"),configSpacePatternFlag:e.Get("ConfigSpacePattern")};e.Get("IsTotalHPagesChanged")==="Y"&&(e.SetProperty("IsTotalHPagesChanged","N"),$("#TGrid").width(w.toString()+"%"),$("#UGrid").width(w.toString()+"%")),t=e.Get("RecordSet"),n=t?t.length:0,r=n>r?r:n,i=parseInt(n/r,10),g=n-i*r,this.setTotalPages(i),this.setRemainingRows(g),p=h&1,h>>=1,d=h&1;while(h){h>>=1,c+=1;if(h&1)switch(c){case 2:if(d){$("#HGrid").empty().append(ot.call(this)),SiebelJS.Log("RGrid Dynamic"),s=0,$("#RGrid").empty();while(s<i)o=s*r,u=o+r,e.ExecuteMethod("prepareRespage",o,u),b+=ut.call(this,o,u,"page"+s.toString(),t,C),s+=1;g>0&&(o=i*r,u=o+g,e.ExecuteMethod("prepareRespage",o,u),b+=ut.call(this,o,u,"page"+s.toString(),t,C)),$("#RGrid").append(b),St.call(this,n)}break;case 3:p,d&&(SiebelJS.Log("TGrid Dynamic"),$("#TGrid").empty().append(this.renderTimeScale()));break;case 4:p;if(d){s=0,SiebelJS.Log("UGrid Dynamic"),$("#UGrid"
).empty();while(s<i)o=s*r,u=o+r,e.prepareUtillpage(o,u),y+=at.call(this,o,u,"page"+s.toString(),t,C),s+=1;g>0&&(o=i*r,u=o+g,e.prepareUtillpage(o,u),y+=at.call(this,o,u,"page"+s.toString(),t,C)),$("#UGrid").append(y)}}}N=parseInt($(".siebui-gdfColHeader").css("max-width"))*T,$(".siebui-splitBox0").width(N),$(".siebui-splitBox1").width(N),m&&e.Get("PanesToRefresh")&4&&G.call(this,m),wt.call(this),e.Get("InEvent")===!1?this.SetHScrollPos():e.SetProperty("InEvent",!1),Lt.call(this);var k=e.Get("Resource Id"),L=e.Get("ResIDtoIndex"),A=L?L[k]:0,O=t?t[A]:0;O&&(this.getFirstLoad()===1&&Y.call(this,O["Resource Name"]),pt.call(this)),this.setFirstLoad(0),C=null,v=null,SiebelApp.S_App.uiStatus.Free()},Q.prototype.BindEvents=function(){SiebelAppFacade.GanttRenderer.superclass.BindEvents.call(this);var e=this,t=e.GetPM(),n,r,i,s,o,u,a,f,l=0,c=0,h=0,p=0,d=null,v,m,g,y,b,w,E,S,x,T=SiebelApp.S_App.PluginBuilder.GetHoByName("EventHelper"),N=$("#s_"+this.GetAppletId()+"_div");n=t.Get("GetControls"),r=n["Display Toggle"],r&&(i=this.GetUIWrapper(r),w=i.GetEl(),T&&w.length&&T.Manage(w,"autocompleteclose",{ctx:this,CW:i},Dt)),s=n["Color Display Toggle"],s&&(o=this.GetUIWrapper(s),E=o.GetEl(),T&&E.length&&T.Manage(E,"autocompleteclose",{ctx:this,CW:o},Pt)),u=n.GoToResource,u&&(a=this.GetUIWrapper(u),f=a.GetEl(),f.autocomplete({source:[]}).autocomplete("option","position",{my:"center top",at:"center bottom",of:$(f),collision:"flip flip"}),T&&f.length&&(T.Manage(f,"autocompleteclose",{ctx:this},At),T.Manage(f,"keypress",{ctx:this},Ot))),x=N.find(".siebui-option-bar"),T&&x.length&&T.Manage(x,"click",{ctx:this},tt,"button"),T&&N.length&&(T.Manage(N,"mouseenter",{ctx:this},function(e){m=$("#_sweview")[0].title,g=e.currentTarget.title,e.currentTarget.title="",$("#_sweview")[0].title=""}),T.Manage(N,"mouseleave",{ctx:this},function(e){e.currentTarget.title=g,$("#_sweview")[0].title=m}),T.Manage(N,"mouseover",{ctx:this,attr:"Id",Input:"ResId",Pane:"Pane 0"},lt,".siebui-showResTooltip"),T.Manage(N,"mouseover",{ctx:this},ct,".siebui-taskBox"),T.Manage(N,"mouseover",{ctx:this,attr:"DateVal",Input:"DateVal",Pane:"Pane 1"},lt,".siebui-showTSTooltip"),T.Manage(N,"mouseover",{ctx:this},ht,".siebui-taskBox.Rsizable"),T.Manage(N,"click",{ctx:this},ft,".siebui-expcoll"),T.Manage(N,"click",{ctx:this},e.drillDownHandler,".siebui-ganttDrilldown"),T.Manage(N,"click",{ctx:this},pt,".siebui-taskEditUtility"),T.Manage(N,"click",{ctx:this},pt,".siebui-taskEditRow"),T.Manage(N,"dblclick",{ctx:this},dt,".siebui-taskEditUtility"),T.Manage(N,"dblclick",{ctx:this},gt,".siebui-taskBox"),T.Manage(N,"click",{ctx:this},mt,".siebui-gdfColHeader"),T.Manage(N,"mousedown",{ctx:this},vt,".siebui-taskBox.Dragpble"),T.Manage(N,"mouseup",{ctx:this},yt,".siebui-taskEditUtility"),T.Manage(N,"click",{ctx:this},et,".siebui-ganttFilterPane"),T.Manage(N,"mousedown",{ctx:this},Et,".siebui-vSplitBar"),T.Manage(N,"mouseover",{ctx:this},xt,".siebui-gdfColHeader"),T.Manage(N.find(".siebui-VScroll"),"scroll",{ctx:this},_t)),S=N.find(".siebui-splitBox3"),T&&S.length&&(T.Manage(S,"mousedown",{ctx:this,el:N},function(e){$(e.data.el).data("SCROLL_BUTTON",!0)}),T.Manage(S,"mouseup",{ctx:this,el:N},function(e){$(e.data.el).data("SCROLL_BUTTON",!1),h=0}),T.Manage(S,"scroll",{ctx:this,iScroll:h,el:N,prevScroll:c},Mt)),N=null,n=null},Q.prototype.EndLife=function(){ganttDateBar=null,ganttLegendBar=null,m_mapResIndex=null,SiebelAppFacade.GanttRenderer.superclass.EndLife.call(this)},Q.prototype.preparerowtasks=function(t,r,i){var s="",u=i.EventColor,a=i.Statabb,f=i.configSpacePatternFlag,l,c,h,p,d,v,m,g,y,b="siebui-layout",w=98,E=SiebelApp.S_App.IsAutoOn(),S=this.GetPM(),x=S.Get("Border Color"),T,N,C="";i.TST==="64"&&(b+=" siebui-taskBoxMonthDay");if(t)for(p in t)y=t[p],t.hasOwnProperty(p)&&(l=y[a],c=a+"_"+l,y.BT&&(y.BT==="Out of Order"||y.BT==="Unavailable Instance"||y.BT==="Ineffective UNCHANGED")&&(c="GS_LIC_"+y.BT),u&&(h=u[c]),h||(h=i.EventDefaultColor),T="",N="",x&&typeof x!="undefined"&&(y.BT&&y.BT==="Backup"&&(T=x[S.Get("BBC")]),y.BT&&y.BT==="Active"&&(T=x[S.Get("ABC")]),T&&typeof T!="undefined"&&(N="border-width:1px;border-style:solid;border-color:"+T)),d=t[p][n],y.OLPCNT&&y.OLPCNT>2&&(d="",y.Icon&&(y.Icon="")),d||(d=""),v=y.DDID,v?m=o:(v="",m=""),g=100-(t[p].SW?parseInt(t[p].SW,10):0)-(t[p].TW?parseInt(t[p].TW,10):0)-5,s=s+'<div class="siebui-taskBox '+t[p].CLS+'" taskId='+t[p].ID+"  id= "+r.toString()+" style=width:"+t[p].width+"%;height:"+t[p].height+"px!important;left:"+t[p].left+"%;margin-top:"+t[p].top+"px;z-index:"+w+";"+N+";",E==="true"&&(s=s+'ot = "div" rn = "event-'+t[p].ID+'" un = "event-'+t[p].ID+'"'),s=s+">"+'<div class="'+b+'" style=background-color:'+h+";>",t[p].SW&&(s=s+'<div class = "siebui-turnTime siebui-setupTime" style = width:'+t[p].SW+"%;></div>"),t[p].TW&&(s=s+'<div class = "siebui-turnTime siebui-teardownTime" style = width:'+t[p].TW+"%;></div>"),f==="Y"&&t[p].CFST&&t[p].CFST==="Y"&&(s+='<div class = "siebui-configSpacePattern">'),s=s+'<span class="siebui-taskStatus" style = width:'+g+"%; status="+t[p].GS+">"+this.createIconInfo(t[p]),C=" data-drilldown-type= 'UGrid' data-drilldown-id='"+v+"'",E==="true"&&(C+="ot = 'a' rn = '"+d+"' un = '"+d+"'"),s+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:"siebui-activityLabel "+m,value:HtmlEncode(d),attrs:C}),s+="</span></div></div>",f==="Y"&&t[p].CFST&&t[p].CFST==="Y"&&(s+="</div>"));return s},Q.prototype.drillDownHandler=function(e){var t=e.data.ctx,n=t.GetPM(),r=$(this).attr("data-drilldown-type"),i=null,s=null,o,u,a,f,l,c;switch(r){case"UGrid":SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),o=n.Get("Activity_DDInfo"),o&&(i=o["Item Drilldown Name"],s=$(this).attr("data-drilldown-id")),n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s)),SiebelApp.S_App.uiStatus.Free();break;case"RGrid":SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:!0}),a=$("#s_"+t.GetAppletId()+"_div"
).find(".siebui-gdfColHeader").eq($(this).parent().parent().index()),i=a.attr("data-idd-name"),s=$(this).attr("data-drilldown-id"),n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s)),SiebelApp.S_App.uiStatus.Free();break;case"BAxis":l=n.Get("TSDDInfo"),l&&(i=l["Item Drilldown Name"],s=l["Item Drilldown Field"],n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s)));break;case"TAxis":l=n.Get("TSDDInfo");var h=$(this).attr("dateval");l&&(i=l["Item Drilldown Name"],s=l["Item Drilldown Field"],n.ExecuteMethod("CustomDrillDown",t.GetDrilldownPropSet(this,i,s,h)));break;default:var p=n.Get("DateDrilldown"),d=n.Get("TST")+":",v;p&&(v=p.substring(p.indexOf(d)+d.length,p.indexOf(";",p.indexOf(d))));if(v){var h=$(this).attr("dateval");n.ExecuteMethod("RefreshGanttChart",h,v,K),t.getGanttDateBar().setNavigationValues()}}},Q.prototype.GetDrilldownPropSet=function(e,t,n,r){if(t&&n)return propset=CCFMiscUtil_CreatePropSet(),propset.SetProperty("DrillDownName",t),propset.SetProperty("DestFieldValue",n),r&&propset.SetProperty("DestDateValue",r),propset},Q.prototype.calcNonContiguousTime=function(e){var t=this.GetPM(),n=t.Get("PixelsPerUnit"),r=t.Get("TDays"),s=t.Get("StartTime"),o=t.Get("EndTime");return absPixels=n*$("#UGrid").width(),absPixels&&(noOfUnits=parseInt(e/absPixels)),timePixels=e%absPixels,startDay=t.Get(i)+noOfUnits*r,absPixels&&(startTime=parseInt(t.Get("StartTime")+timePixels/absPixels*t.Get("AxisDuration"),10)),startDay+=startTime,parseInt(startDay,10)},Q.prototype.createIconInfo=function(e){var t="",n=this.GetPM().Get(r)[u],i;if(e.Icon){var s=e.Icon.split(",");for(var o=0;o<s.length;o++)n&&n[s[o]]&&(i=n[s[o]],t=t+"<span class='"+i+"'></span>")}return t},Q.prototype.SetHScrollPos=function(){var e=this.GetPM(),t=new Date(e.Get(f)),n=String(e.Get(v)),r=0;e.ExecuteMethod("setHoursFrom",t,n),r=(t.getTime()-e.Get(i))/(e.Get(s)-e.Get(i)),r*=e.Get("MinGanttsize"),$(".siebui-splitBox3").scrollLeft(r)},Q.prototype.renderTimeScale=function(){var e=this.GetPM(),t,n,r,u,a,f,l,c,h=0,p,d,v,y,b,E,R,U,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt=0,it='<div class = "siebui-ganttTable">',st='<div class = "siebui-ganttHead1',ot='<div class = "siebui-ganttHead2',ut,at,ft=36e5,lt=e.Get(S),ct=lt?1:0,ht=e.Get(m),pt=e.Get(T),dt,vt=60,mt="",gt,yt=e.Get(w),bt=e.Get("StartTime")/36e5,wt=e.Get("EndTime")/36e5,Et=e.Get("FinalWeekDays"),St=e.Get(i),xt=e.Get(s),Tt=e.Get("UserPrefWDS"),Nt,Ct=0,kt="",Lt,At,Ot,Mt,_t,Dt,Pt,Ht=0,Bt=0,jt=e.Get("TotalHPages"),Ft=e.Get("isDispatchBoard");ct?(ut='<div class = "siebui-ganttHead3 siebui-threeAxis">',st+=' siebui-threeAxis">',ot+=' siebui-threeAxis">',et=100/3+"%"):(st+=' siebui-twoAxis">',ot+=' siebui-twoAxis">',et="50%");switch(Number(e.Get(g))){case O:t=new Date(St),Ct=5*e.Get("TotalHPages");if(!ht)break;d=ht.length;while(t.getTime()<=xt&&h<Ct){a=t.getTime(),Y=t.format("MM/dd/yyyy"),dt=pt[Y],Nt=this.IsWeekend(t),n=1/Ct*100,st+=this.createTimeScaleCell(new Date(a),"DDD, MMM D",0,n+"%",0,o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,n+"%",0,o,Y)}Q=0,R="",Ht==0&&(tt=parseInt(ht[Q].ST.substr(0,2))*60*60+parseInt(ht[Q].ST.substr(3,2))*60+parseInt(ht[Q].ST.substr(6,2)),rt=tt/86400*100),R+='<div style="width: '+n*jt+"% ; left:"+Ht+"% ; position: absolute; height:"+et+';" class="siebui-ganttInnerTbl">',Ht+=n*jt,tt!=0&&(R+=this.createTimeScaleCell(ht[d-1].NM.substr(0,1),"",0,rt+"%","0%")),nt=rt;while(Q<d)at=ht[Q].DUR/3600,tt!=0&&Q==d-1?at=(ht[Q].DUR-tt)/3600:at=ht[Q].DUR/3600,u=at/24*100,R+=this.createTimeScaleCell(ht[Q].NM.substr(0,1),"",0,u+"%",nt+"%"),Q+=1,nt+=u;R+="</div>",ot+=R,h++,t.setDate(t.getDate()+7)}break;case _:var It=0;t=new Date(St),a=t.getTime(),Dt=new Date(t),noOfCells=31*jt,h=0,u=100/31;while(h<noOfCells){Et&&Et.indexOf(t.getDay())!==-1&&(Nt=this.IsWeekend(t),Y=t.format("MM/dd/yyyy"),dt=pt[Y],ot+=this.createTimeScaleCell(t,"D",0,u+"%",Ht+"%",o,dt,Nt,0,Y),ct&&(ut+=this.createBAxisCell(lt[Y]?lt[Y].FLD1:"",u+"%",Ht+"%",o,Y)),Ht+=u,h++,It++),Dt.setDate(t.getDate()+e.Get(x));if(t.getMonth()!=Dt.getMonth()||h===noOfCells)st+=this.createTimeScaleCell(t,"MMMM",0,u*It+"%",Bt+"%"),It=0,Bt=Ht;t.setDate(t.getDate()+e.Get(x))}break;case H:t=new Date(St);var qt=0,Rt=0,Ut,zt;Ut=new Date(t.getTime()),zt=new Date,zt.setDate(Ut.getDate()+1),bt<wt?Rt=wt-bt:Rt=24-(bt-wt);if(Rt===0||isNaN(Rt))Rt=24;while(t.getTime()<xt){a=t.getTime(),Y=t.format("MM/dd/yyyy"),Nt=this.IsWeekend(t),t.setDate(t.getDate()+1),V=new Date(a),n=200,t.getTime()<xt?U=t.getTime():U=xt,dt=pt[Y];if(Et.indexOf((new Date(a)).getDay())===-1)continue;st+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",Bt+"%",o,dt,Nt);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,n+"%",Bt+"%",o,Y)}Bt+=n,u=.5*n/Rt,R="";while(V.getTime()<U)Ot=V.getHours(),Mt=V.getMinutes(),$=Ot*vt+Mt,J=U-V.getTime(),e.Get(z)&&(Z=e.Get(z)[Ot]),$%(.5*vt)!==0||J<.5*ft?($%(.5*vt)!==0?G=.5*vt-$%(.5*vt):G=J/6e4,K=G/(.5*vt)*u,R+=this.createTimeScaleCell(V,"h:mmp",0,K+"%",0,0,0,0,Z),V.setTime(V.getTime()+G*vt*1e3)):(Ft==="TRUE"?bt!=""&&wt!=""?V.getHours()>=bt&&V.getHours()<wt&&(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u):bt!=""&&wt===""?V.getHours()>=bt&&(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u):(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u):(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u),qt===0?(V.setMinutes(30),qt++):(V.setHours(V.getHours()+1),V.setMinutes(0),qt=0));ot+=R}break;case B:t=new Date(St);var qt=1,Rt=0,Ut,zt;Ut=new Date(t.getTime()),zt=new Date,zt.setDate(Ut.getDate()+1),bt<wt?Rt=wt-bt:Rt=24-(bt-wt);if(Rt===0||isNaN(Rt))Rt=24;while(t.getTime()<xt){a=t.getTime(),Y=t.format("MM/dd/yyyy"),Nt=this.IsWeekend(t),t.setDate(t.getDate()+1),V=new Date(a),n=400,t.getTime()<xt?U=t.getTime():U=xt,dt=pt[Y];if(Et.indexOf((new Date(a)).getDay())===-1)continue;st+=this.createTimeScaleCell(new Date(a)
,"DDDD, MMMM D",0,n+"%",Bt+"%",o,dt,Nt);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,n+"%",Bt+"%",o,Y)}Bt+=n,u=.25*n/Rt,R="";while(V.getTime()<U)Ot=V.getHours(),Mt=V.getMinutes(),$=Ot*vt+Mt,J=U-V.getTime(),e.Get(z)&&(Z=e.Get(z)[Ot]),$%(.25*vt)!==0||J<.25*ft?($%(.25*vt)!==0?G=.25*vt-$%(.25*vt):G=J/6e4,K=G/(.25*vt)*u,R+=this.createTimeScaleCell(V,"h:mmp",0,K+"%",0,0,0,0,Z),V.setTime(V.getTime()+G*vt*1e3)):(Ft==="TRUE"?bt!=""&&wt!=""?V.getHours()>=bt&&V.getHours()<wt&&(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u):bt!=""&&wt===""?V.getHours()>=bt&&(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u):(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u):(R+=this.createTimeScaleCell(V.format("h:mm a"),"",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u),qt<4?(V.setMinutes(15*qt),qt++):(V.setHours(V.getHours()+1),V.setMinutes(0),qt=1));ot+=R}break;case j:t=new Date(St);var Wt=new Date(St),Xt=new Date(Wt),Vt,$t=0;Wt.setDate(1),Xt.setDate(Wt.getDate()-1),Xt.setHours(23,59,59,999),Xt.setFullYear(Xt.getFullYear()+1),t.getDate()>1&&($t=1),u=100/(12+$t)*e.Get("TotalHPages");while(t.getTime()<xt)ot+=this.createTimeScaleCell(t,"MMMM",0,u+"%"),t.getMonth()==11?t=new Date(t.getFullYear()+1,0,1):t=new Date(t.getFullYear(),t.getMonth()+1,1),Wt.getMonth()==t.getMonth()&&(Vt=new Date(t),Vt.setDate(Vt.getDate()-1),Lt=q.GetStringFromDateTime(Wt.format(W),X,"MMMM D YYYY")+" - "+q.GetStringFromDateTime(Vt.format(W),X,"MMMM D YYYY"),st+=this.createTimeScaleCell(Lt,"",0,12*u+"%"),Wt=new Date(t));break;case F:var Jt=1,Kt=0,Wt,Vt,Qt,Gt=new Date(St);t=new Date(St);if(t.getDate()<3&&t.getMonth()==0||t.getDate()>29&&t.getMonth()==11)Kt=1;u=100/(52*e.Get("TotalHPages")+Kt),Wt=new Date(St);while(t.getTime()<xt){Nt=this.IsWeekend(t),Gt.setDate(t.getDate()+6),ot+=this.createTimeScaleCell(Jt,"",0,u+"%",0,o,dt,Nt);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,4*u+"%",0,o,Y)}t.setDate(t.getDate()+7),Jt++,Jt>52&&(Jt=1,Qt=t.getDate(),Qt<30&&t.setDate(t.getDate()+1),Vt=new Date(t),Vt.setDate(Vt.getDate()-1),Lt=q.GetStringFromDateTime(Wt.format(W),X,"MMMM D YYYY")+" - "+q.GetStringFromDateTime(Vt.format(W),X,"MMMM D YYYY"),st+=this.createTimeScaleCell(Lt,"",0,52*u+"%"),Wt=new Date(t),Wt.setDate(Wt.getDate()+1))}break;case D:t=new Date(St),a=t.getTime(),noOfCells=5*e.Get("TotalHPages"),u=100/noOfCells;while(t.getTime()<xt&&h<noOfCells){t.setDate(1),t.setMonth(t.getMonth()+1),t.getTime()<xt?(r=Math.ceil((t.getTime()-a)/(ft*24*e.Get(x))),h+=r):r=noOfCells-h,st+=this.createTimeScaleCell(new Date(a),"MMMM",0,r*u+"%");if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,r*u+"%",0,o,Y)}a+=r*ft*24*7}p="DDD DD",t=new Date(St),h=0;while(++h<=noOfCells)Nt=this.IsWeekend(t),Y=t.format("MM/dd/yyyy"),dt=pt[Y],ot+=this.createTimeScaleCell(t,p,0,u+"%",0,o,dt,Nt,0,Y),t.setDate(t.getDate()+e.Get(x));break;case P:t=new Date(St),a=t.getTime(),noOfCells=14*e.Get("TotalHPages"),u=100/noOfCells;while(t.getTime()<xt&&h<noOfCells)t.setDate(1),t.setMonth(t.getMonth()+1),t.getTime()<xt?(r=Math.ceil((t.getTime()-a)/(ft*24*e.Get(x))),h+=r):r=noOfCells-h,st+=this.createTimeScaleCell(new Date(a),"MMMM",0,r*u+"%"),a+=r*ft*24*7;p="DDD DD",t=new Date(St),h=0;while(++h<=noOfCells){Nt=this.IsWeekend(t),Y=t.format("MM/dd/yyyy"),dt=pt[Y],ot+=this.createTimeScaleCell(t,p,0,u+"%",0,o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,r*u+"%",0,o,Y)}t.setDate(t.getDate()+e.Get(x))}break;case N:case C:case k:var Rt=0,Ut,zt;t=new Date(St),Ut=new Date(t.getTime()),zt=new Date,zt.setDate(Ut.getDate()+1),bt<wt?Rt=wt-bt:Rt=24-(bt-wt);if(Rt===0||isNaN(Rt))Rt=24;while(t.getTime()<xt){a=t.getTime(),Y=t.format("MM/dd/yyyy"),Nt=this.IsWeekend(t),t.setDate(t.getDate()+1),V=new Date(a),t.getTime()<xt?U=t.getTime():U=xt,n=100,dt=pt[Y];if(Et.indexOf(V.getDay())===-1)continue;st+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",Bt+"%",o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,n+"%",Ht+"%",o,Y)}Bt+=n,u=e.Get(x)*n/Rt,R='<div style="width:'+n/jt+'%;" class="siebui-ganttInnerTblDH">';if(Ft==="TRUE")while(V.getTime()<U)(bt==""||V.getHours()>=bt)&&(wt==""||V.getHours()<wt)&&(R+=this.createTimeScaleCell(V,"h:mmp",0,u+"%",Ht+"%",0,0,0,Z),Ht+=u),V.setUTCHours(V.getUTCHours()+e.Get(x));else while(V.getTime()<U)R+=this.createTimeScaleCell(V,"hp",0,u+"%",Ht+"%",0,0,0,Z),V.setUTCHours(V.getUTCHours()+e.Get(x)),Ht+=u;R+="</div>",ot+=R}break;case L:t=new Date(e.Get(i));if(!ht)break;d=ht.length;while(t.getTime()<xt){a=t.getTime(),Y=t.format("MM/dd/yyyy"),V=new Date(a),Nt=this.IsWeekend(t),t.setDate(t.getDate()+1),U=t.getTime(),n=(t.getTime()-a)/(xt-e.Get(i))*100,dt=pt[Y],st+=this.createTimeScaleCell(new Date(a),"DDDD, MMMM D",0,n+"%",0,o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,n+"%",0,o,Y)}Q=0,R="",Ht==0&&(tt=parseInt(ht[Q].ST.substr(0,2))*60*60+parseInt(ht[Q].ST.substr(3,2))*60+parseInt(ht[Q].ST.substr(6,2)),tt!=0&&(Ht=tt/(xt-e.Get(i))*100*1e3,R='<div style="width:'+Ht*100/n+"% ; left: 0% ; position: absolute; height:"+et+';" class="siebui-ganttInnerTbl">',R+=this.createTimeScaleCell(ht[d-1].NM,"",0,"100%","0%"),R+="</div>")),R+='<div style="width:'+n*jt+"% ; left:"+Ht*100/n+"% ; position: absolute; height:"+et+';" class="siebui-ganttInnerTbl">',nt=0;while(V.getTime()<U)at=ht[Q].DUR/3600,t.getTime()>=xt&&tt!=0&&Q==d-1?u=(ht[Q].DUR-tt)/(xt-e.Get(i))*100*1e3:u=ht[Q].DUR/(xt-e.Get(i))*100*1e3,R+=this.createTimeScaleCell(ht[Q].NM,"",0,u*100/n+"%",nt*100/n+"%"),Q=(Q+1)%d,V.setHours(V.getHours()+at),Ht+=u,nt+=u;R+="</div>",ot+=R}break;case A:t=new Date(e.Get(i));if(!ht)break;d=ht.length;while(t.getTime()<xt){a=t.getTime(),Y=t.format("MM/dd/yyyy"),Nt=this.IsWeekend(t),t.setDate(t.getDate()+1),n=(t.getTime()-a)/(xt-
e.Get(i))*100,dt=pt[Y],st+=this.createTimeScaleCell(new Date(a),"DDD, MMM D",0,n+"%",0,o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,n+"%",0,o,Y)}Q=0,R="",Ht==0&&(tt=parseInt(ht[Q].ST.substr(0,2))*60*60+parseInt(ht[Q].ST.substr(3,2))*60+parseInt(ht[Q].ST.substr(6,2)),tt!=0&&(Ht=tt/86400*100,Ht=Ht*n*jt/100,R='<div style="width:'+Ht+"% ; left: 0% ; position: absolute; height:"+et+';" class="siebui-ganttInnerTbl">',R+=this.createTimeScaleCell(ht[d-1].NM.substr(0,1),"",0,"100%","0%"),R+="</div>")),R+='<div style="width: '+n*jt+"% ; left:"+Ht+"% ; position: absolute; height:"+et+';" class="siebui-ganttInnerTbl">',nt=0,Ht+=n*jt;while(Q<d)at=ht[Q].DUR/3600,t.getTime()>=xt&&tt!=0&&Q==d-1?at=(ht[Q].DUR-tt)/3600:at=ht[Q].DUR/3600,u=at/24*100,R+=this.createTimeScaleCell(ht[Q].NM.substr(0,1),"",0,u+"%",nt+"%"),Q+=1,nt+=u;R+="</div>",ot+=R}break;case I:var Yt=0;t=new Date(e.Get(i)),h=0,firsttimeWeekSet=!0,createMajorAxis=!1,At=new Date(e.Get(i));while(At.getTime()<xt)At.setDate(At.getDate()+7),h++;t=new Date(e.Get(i)),At=new Date(e.Get(i)),_t=(xt-t.getTime())/(24*ft),u=7/_t*100,n=5*u;while(t.getTime()<xt){Nt=this.IsWeekend(t),Y=t.format("MM/dd/yyyy"),dt=pt[Y],firsttimeWeekSet==1?(At.setDate(t.getDate()+6),firsttimeWeekSet=!1):At.setDate(At.getDate()+7),Lt=q.GetStringFromDateTime(t.format(W),X,"MMMM D")+"-"+q.GetStringFromDateTime(At.format(W),X,"MMMM D"),ot+=this.createTimeScaleCell(Lt,"",0,u+"%",0,o,dt,Nt),Yt++;if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,Yt*mnrAxiswidth+"%",0,o,Y)}if(At.getDate()==30){var Zt=new Date(At);createMajorAxis=!0,Zt.setDate(Zt.getDate()+1),Zt.getDate()==31&&Zt.getMonth()==At.getMonth()&&(createMajorAxis=!1)}else At.getDate()==31&&(createMajorAxis=!0);if(t.getMonth()!=At.getMonth()||createMajorAxis==1)st+=this.createTimeScaleCell(t,"MMMM",0,Yt*u+"%"),Yt=0,createMajorAxis=!1;t.setDate(t.getDate()+7)}break;case M:if(Ft==="TRUE"){var en=0,tn;t=new Date(e.Get(i)),noOfCells=yt*jt,u=jt/noOfCells*100,n=u*yt;while(t.getTime()<xt){if(Et.indexOf(t.getDay())!==-1){Nt=this.IsWeekend(t),Y=t.format("MM/dd/yyyy"),dt=pt[Y],ot+=this.createTimeScaleCell(t,"D DDDD",0,u+"%",Ht+"%",o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,u+"%",Ht+"%",o,Y)}en===0&&(tn=new Date(t)),en++,Ht+=u}en===Number(yt)&&(Lt=q.GetStringFromDateTime(tn.format(W),X,"MMMM D")+" - "+q.GetStringFromDateTime(t.format(W),X,"MMMM D"),en=0,st+=this.createTimeScaleCell(Lt,"",0,n+"%",Bt+"%"),Bt+=n),t.setDate(t.getDate()+1)}}else{var nn=!1,rn=1,sn=0;noOfCells=yt*jt,u=jt/noOfCells*100,t=new Date(e.Get(i)),f=new Date(xt);while(t.getTime()<xt){nn=!1;if(Et.indexOf(t.getDay())!==-1){nn=!0;break}t.setDate(t.getDate()+1)}while(t.getTime()<=xt){rn=1,sn=0,Dt=new Date(t);for(gt=1;gt<yt;gt++)Dt.setDate(Dt.getDate()+1),t.getMonth()===Dt.getMonth()?rn++:sn++;c=new Date(Dt),t.getMonth()===c.getMonth()?(st+=this.createTimeScaleCell(t,"MMMM",0,rn*u+"%",Bt+"%"),Bt+=u*rn):(st+=this.createTimeScaleCell(t,"MMMM",0,rn*u+"%",Bt+"%"),Bt+=u*rn,st+=this.createTimeScaleCell(c,"MMMM",0,sn*u+"%",Bt+"%"),Bt+=u*sn),t.setDate(t.getDate()+7)}t=new Date(e.Get(i));while(t.getTime()<xt){if(Et.indexOf(t.getDay())!==-1){Nt=this.IsWeekend(t),Y=t.format("MM/dd/yyyy"),dt=pt[Y],ot+=this.createTimeScaleCell(t,"D DDDD",0,u+"%",Ht+"%",o,dt,Nt,0,Y);if(ct){kt="";for(gt in lt[Y])kt?kt=kt+"/"+lt[Y][gt]:kt=lt[Y][gt];ut+=this.createBAxisCell(kt,u+"%",Ht+"%",o,Y)}Ht+=u}t.setDate(t.getDate()+1)}}}return st+="</div>",ot+="</div>",ct?(ut+="</div>",it+=st+ot+ut+"</div>"):it+=st+ot+"</div>",V=null,it},Q.prototype.createTimeScaleCell=function(t,n,r,i,s,o,a,f,l,c){var h=this.GetPM(),p=h.Get(U),d=h.Get(u),v="../images/",m=[],y,b="",w,E='<div style=" ',x,T=h.Get(S),C=T?1:0,k=h.Get("Special Days Class"),M=SiebelApp.S_App.IsAutoOn(),D=h.Get("TSDDInfo"),P=D["Custom DrillDown"],H="";cls='class = "siebui-ganttHeadCell',n?x=q.GetStringFromDateTime(t.format(W),X,n):x=t,i&&i!==0&&(E+="width:"+i+";"),s&&s!==0&&(E+="left:"+s+"; position: absolute;",h.Get(g)!=L&&h.Get(g)!=A&&h.Get(g)!=O&&(C?E+="height:"+100/3+"%;":E+="height: 50%;")),f&&(p&&(y=p.Weekends),y&&(E+="background-color:"+y+";",cls+=" siebui-Weekends"));if(a){k&&(o=o+" siebui-"+k);for(var B in a)a.hasOwnProperty(B)&&m.push(B);m.sort();for(var j=0;j<m.length;j++)B=m[j],d&&d[B]&&h.Get(g)!=_&&(w=d[B],b+='<span class="'+w+'"></span>'),!y&&p&&p[B]&&(y=p[B],y&&(E+="background-color:"+y+";",y=""))}return E+='"'+cls,l&&h.Get(g)===N&&(E+=" siebui-"+l),E+='">',c?(P==="Y"&&(H='data-drilldown-type="TAxis"'),H+="DateVal = '"+c+"'",M==="true"&&(H+=" ot = 'a' rn = 'TSA"+c+"' un = 'TSA"+c+"'"),E+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:"siebui-showTSTooltip "+(o?o:""),value:HtmlEncode(x),attrs:H})):(M==="true"&&(H+=" ot = 'a' rn = 'TSA"+x+"' un = 'TSA"+x+"'"),typeof x=="number"&&(x=x.toString()),E+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:o?o:"",value:HtmlEncode(x),attrs:H}),o&&P==="Y"&&(E+='data-drilldown-type="TAxis"')),E+=b,E+="</div>",E},Q.prototype.createBAxisCell=function(t,n,r,i,s){var o=this.GetPM(),u="",a=o.Get(S),f=a?1:0,l='<div class="siebui-ganttHeadCell" style="',t,c="";return n&&n!==0&&(l+="width:"+n+";"),r&&r!==0&&(l+="left:"+r+"; position: absolute;",f?l+="height:"+100/3+"%;":l+="height: 50%;"),l+='">',i&&(u=i,c="data-drilldown-type='BAxis'"),SiebelApp.S_App.IsAutoOn()==="true"&&s&&(c+=" ot = 'a' rn = 'BA"+t+"' un = 'BA"+s+"-"+t+"'"),l+=SiebelAppFacade.HTMLTemplateManager.GenerateMarkup({type:e.get("SWE_CTRL_LINK"),className:i?i:"",value:HtmlEncode(t),attrs:c}),l+="</div>",l},Q.prototype.IsWeekend=function(e){if(e instanceof Date){var t=e.getDay(),n=this.GetPM();t===0&&(t=7);if(n.Get(R))return n.Get(R).indexOf(t)!==-1}},Q}(),"SiebelAppFacade.GanttRenderer"}));
